(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7022],{7096:(e,s,t)=>{"use strict";t.d(s,{d:()=>n});var a=t(20906),r=t(8627);t(33826);var i=t(66208);let n=e=>{let{className:s,...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"switch",className:(0,i.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(r.zi,{"data-slot":"switch-thumb",className:(0,i.cn)("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},32788:(e,s,t)=>{Promise.resolve().then(t.bind(t,49056))},48450:(e,s,t)=>{"use strict";t.d(s,{AM:()=>n,Wv:()=>l,hl:()=>c});var a=t(20906),r=t(48581);t(33826);var i=t(66208);let n=e=>{let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"popover",...s})},l=e=>{let{...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"popover-trigger",...s})},c=e=>{let{className:s,align:t="center",sideOffset:n=4,...l}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{"data-slot":"popover-content",align:t,sideOffset:n,className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",s),...l})})}},49056:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eW});var a=t(20906),r=t(78412),i=t(80317),n=t(88973),l=t(7389),c=t(76405),d=t(77012),o=t(56942),x=t(21491),m=t(42505),u=t(48192),p=t(36866),h=t(21657),g=t(51457),v=t(41012),j=t(69476),y=t(31833),f=t(65462),b=t(90869),N=t(129),w=t(12488),C=t(33826),k=t(4211),T=t(10991),A=t(86067),R=t(73809);let S=e=>{let{isOpen:s,onClose:t,onSave:r,initialNotes:i="",title:n="Edit Notes",placeholder:l="Add your notes here..."}=e,[c,d]=(0,C.useState)(i);(0,C.useEffect)(()=>{d(i)},[i,s]);let o=()=>{d(i),t()};return(0,a.jsx)(T.lG,{open:s,onOpenChange:o,children:(0,a.jsxs)(T.Cf,{className:"max-w-2xl",children:[(0,a.jsxs)(T.c7,{children:[(0,a.jsxs)(T.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"w-5 h-5"}),n]}),(0,a.jsx)(T.rr,{children:"Add notes to track form cues, personal records, modifications, or any other relevant information."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"notes",children:"Notes"}),(0,a.jsx)(R.T,{id:"notes",value:c,onChange:e=>d(e.target.value),placeholder:l,className:"min-h-[200px] resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:[c.length," characters"]}),(0,a.jsx)("span",{children:"Tip: Use these notes to track form cues, personal records, or modifications"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsxs)(k.$,{onClick:o,variant:"outline",className:"flex-1",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,a.jsxs)(k.$,{onClick:()=>{r(c),t()},className:"flex-1",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Save Notes"]})]})]})})};var D=t(58620),M=t(70097),E=t(92661),z=t(84715),$=t(81950),W=t(66208);let V=e=>{let{delayDuration:s=0,...t}=e;return(0,a.jsx)($.Kq,{"data-slot":"tooltip-provider",delayDuration:s,...t})},I=e=>{let{...s}=e;return(0,a.jsx)(V,{children:(0,a.jsx)($.bL,{"data-slot":"tooltip",...s})})},P=e=>{let{...s}=e;return(0,a.jsx)($.l9,{"data-slot":"tooltip-trigger",...s})},B=e=>{let{className:s,sideOffset:t=0,children:r,...i}=e;return(0,a.jsx)($.ZL,{children:(0,a.jsxs)($.UC,{"data-slot":"tooltip-content",sideOffset:t,className:(0,W.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...i,children:[r,(0,a.jsx)($.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})};var F=t(25560),J=t(64260),L=t(37634),q=t(8434),_=t(36238),O=t(84936),G=t(22720),Z=t(9105),U=t(43740),H=t(76668),K=t(48450),Y=t(92848);let Q=e=>{let{searchTerm:s,onSearchChange:t,selectedCategory:r,onCategoryChange:i}=e,{filters:n,handleFilterChange:l,clearFilters:c,getActiveFilterCount:d}=(0,J.d)(),[o,x]=(0,C.useState)(!1),m=d();return(0,a.jsx)("div",{className:"p-6 bg-white border-b border-gray-100 flex-shrink-0",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(E.p,{placeholder:"Search exercises...",value:s,onChange:e=>t(e.target.value),className:"pl-10 h-11 bg-gray-50 border-gray-200 focus:bg-white transition-colors"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Z.ZR.map(e=>(0,a.jsx)(k.$,{variant:r===e?"default":"outline",size:"sm",onClick:()=>i(e),className:"h-8 px-4 rounded-full transition-all ".concat(r===e?"bg-primary text-white shadow-sm":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"),children:e},e))}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(K.AM,{open:o,onOpenChange:x,children:[(0,a.jsx)(K.Wv,{asChild:!0,children:(0,a.jsxs)(k.$,{variant:"outline",size:"sm",className:"h-8 px-3 gap-2 ".concat(m>0?"border-primary text-primary bg-primary/5":"border-gray-200 text-gray-600"),children:[(0,a.jsx)(G.A,{className:"w-3 h-3"}),"Filters",m>0&&(0,a.jsx)(D.E,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:m})]})}),(0,a.jsx)(K.hl,{className:"w-80 p-4",align:"start",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:"Filters"}),m>0&&(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:c,className:"h-6 px-2 text-xs text-gray-500 hover:text-gray-700",children:"Clear all"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"font-medium text-sm text-gray-700 mb-2 block",children:"Difficulty"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.values(U.sv).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.S,{id:"difficulty-".concat(e),checked:n.difficulties.includes(e),onCheckedChange:()=>l("difficulties",e)}),(0,a.jsx)(A.J,{htmlFor:"difficulty-".concat(e),className:"text-sm text-gray-600",children:e})]},e))})]}),(0,a.jsx)(Y.w,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"font-medium text-sm text-gray-700 mb-2 block",children:"Muscle Groups"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.values(U.ur).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.S,{id:"muscle-".concat(e),checked:n.muscleGroups.includes(e),onCheckedChange:()=>l("muscleGroups",e)}),(0,a.jsx)(A.J,{htmlFor:"muscle-".concat(e),className:"text-sm text-gray-600",children:e})]},e))})]}),(0,a.jsx)(Y.w,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"font-medium text-sm text-gray-700 mb-2 block",children:"Equipment"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.values(U.v4).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.S,{id:"equipment-".concat(e),checked:n.equipment.includes(e),onCheckedChange:()=>l("equipment",e)}),(0,a.jsx)(A.J,{htmlFor:"equipment-".concat(e),className:"text-sm text-gray-600",children:e})]},e))})]})]})})]}),m>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[n.difficulties.map(e=>(0,a.jsxs)(D.E,{variant:"secondary",className:"h-6 px-2 text-xs bg-blue-50 text-blue-700 border-blue-200",children:[e,(0,a.jsx)("button",{onClick:()=>l("difficulties",e),className:"ml-1 hover:text-blue-900",children:(0,a.jsx)(j.A,{className:"w-3 h-3"})})]},"difficulty-".concat(e))),n.muscleGroups.map(e=>(0,a.jsxs)(D.E,{variant:"secondary",className:"h-6 px-2 text-xs bg-green-50 text-green-700 border-green-200",children:[e,(0,a.jsx)("button",{onClick:()=>l("muscleGroups",e),className:"ml-1 hover:text-green-900",children:(0,a.jsx)(j.A,{className:"w-3 h-3"})})]},"muscle-".concat(e))),n.equipment.map(e=>(0,a.jsxs)(D.E,{variant:"secondary",className:"h-6 px-2 text-xs bg-purple-50 text-purple-700 border-purple-200",children:[e,(0,a.jsx)("button",{onClick:()=>l("equipment",e),className:"ml-1 hover:text-purple-900",children:(0,a.jsx)(j.A,{className:"w-3 h-3"})})]},"equipment-".concat(e)))]})]})})]})})};var X=t(28530);let ee=e=>{let{className:s,children:t,...r}=e;return(0,a.jsxs)(X.bL,{"data-slot":"scroll-area",className:(0,W.cn)("relative",s),...r,children:[(0,a.jsx)(X.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(es,{}),(0,a.jsx)(X.OK,{})]})},es=e=>{let{className:s,orientation:t="vertical",...r}=e;return(0,a.jsx)(X.VM,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,W.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",s),...r,children:(0,a.jsx)(X.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})},et=e=>{let{exercises:s,searchTerm:t,selectedCategory:r,selectedExercise:i,onExerciseSelect:n,onSearchChange:l,onCategoryChange:c}=e,{filters:d}=(0,J.d)(),o=t||d.difficulties.length>0||d.muscleGroups.length>0||d.equipment.length>0,{exercises:x,isLoading:m}=(0,L.IS)({searchTerm:t||void 0,category:"All"===r?void 0:r,difficulties:d.difficulties,equipment:d.equipment,muscleGroups:d.muscleGroups}),u=(0,q.y)(o?x:s,"",r,o?{difficulties:[],muscleGroups:[],equipment:[]}:d);return(0,a.jsxs)("div",{className:"w-2/3 border-r border-gray-100 flex flex-col bg-gray-50/50 overflow-hidden",children:[(0,a.jsx)(Q,{searchTerm:t,onSearchChange:l,selectedCategory:r,onCategoryChange:c}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(ee,{className:"h-full w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[m?(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:Array.from({length:8}).map((e,s)=>(0,a.jsx)("div",{className:"h-48 bg-gray-200 rounded"},s))})}):(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:u.map(e=>(0,a.jsx)(_.F,{exercise:e,onClick:()=>n(e),isSelected:(null==i?void 0:i.id)===e.id,showChevron:!0},e.id))}),!m&&0===u.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(F.A,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"No exercises found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or category filter"})]})]})})})]})};var ea=t(20616),er=t(2510),ei=t(3418),en=t(16355),el=t(35826);let ec=e=>{let{equipment:s,className:t=""}=e;return s&&0!==s.length?(0,a.jsx)("div",{className:"flex flex-wrap gap-2 ".concat(t),children:s.map(e=>(0,a.jsx)(D.E,{variant:"outline",className:"bg-gray-50",children:e},e))}):null},ed=e=>{let{exercise:s,selectedVariant:t,onVariantSelect:r}=e;return s.variants&&0!==s.variants.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Variants"}),(0,a.jsx)("div",{className:"space-y-3",children:s.variants.map(e=>(0,a.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors hover:bg-gray-50 ".concat((null==t?void 0:t.id)===e.id?"border-primary bg-primary/5":"border-gray-200"),onClick:()=>r((null==t?void 0:t.id)===e.id?null:e),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,a.jsx)(D.E,{variant:"outline",className:"text-xs",children:e.focus})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]},e.id))})]}):null},eo=e=>{let{exercise:s,selectedVariant:t,onVariantSelect:r,onSelectExercise:i,onClose:n}=e,l=(0,w.useRouter)();if(!s)return(0,a.jsx)("div",{className:"w-1/3 flex flex-col bg-white overflow-hidden",children:(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500 p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(F.A,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Select an Exercise"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 max-w-sm",children:"Choose an exercise from the library to view detailed instructions and add it to your workout"})]})})});let c=(0,ei.g)(s,t||void 0);return(0,a.jsxs)("div",{className:"w-1/3 flex flex-col bg-white overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-100 flex-shrink-0",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:c.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(el.H,{difficulty:c.difficulty}),(0,a.jsx)(en.i,{category:s.category}),s.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ea.A,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:s.rating})]})]})]})}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:c.description||"A ".concat(s.category.toLowerCase()," exercise targeting ").concat(c.muscleGroups.join(", ").toLowerCase(),".")})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(ee,{className:"h-full w-full",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Target Muscles"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.muscleGroups.map(e=>(0,a.jsx)("div",{className:"flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium",children:e},e))})]}),c.equipment&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Equipment"}),(0,a.jsx)(ec,{equipment:c.equipment})]}),c.instructions&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Instructions"}),(0,a.jsx)("ol",{className:"space-y-3",children:c.instructions.map((e,s)=>(0,a.jsxs)("li",{className:"flex gap-3",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-sm font-medium",children:s+1}),(0,a.jsx)("span",{className:"text-gray-700 text-sm leading-relaxed",children:e})]},s))})]}),(0,a.jsx)(ed,{exercise:s,selectedVariant:t,onVariantSelect:r})]})})})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:(0,a.jsxs)("div",{className:"space-y-3",children:[t&&(0,a.jsx)("div",{className:"p-3 bg-primary/10 border border-primary/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-primary",children:"Selected Variant:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:t.name})]}),(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>r(null),className:"text-gray-500",children:"Clear"})]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(k.$,{onClick:n,variant:"outline",className:"flex-1",children:"Cancel"}),(0,a.jsxs)(k.$,{onClick:()=>{s&&(l.push("/exercises/".concat(s.id)),n())},variant:"outline",className:"flex-1",children:[(0,a.jsx)(er.A,{className:"w-4 h-4 mr-2"}),"View Details"]}),(0,a.jsx)(k.$,{onClick:i,className:"flex-1 bg-primary hover:bg-primary/90",children:"Add Exercise"})]})]})})]})};var ex=t(66368);let em=e=>{let{isOpen:s,onClose:t,onSelectExercise:r}=e,[i,n]=(0,C.useState)(""),{selectedExercise:l,selectedVariant:c,selectExercise:d,selectVariant:o,clearSelection:x}=function(){let[e,s]=(0,C.useState)(null),[t,a]=(0,C.useState)(null);return{selectedExercise:e,selectedVariant:t,selectExercise:e=>{s(e),e.mainVariantId&&e.variants?a(e.variants.find(s=>s.id===e.mainVariantId)||null):a(null)},selectVariant:e=>{a(e)},clearSelection:()=>{s(null),a(null)}}}(),[m,u]=(0,C.useState)("All"),{exercises:p,isLoading:h,error:g}=(0,L.Fb)();return h?(0,a.jsx)(T.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(T.Cf,{className:"!max-w-[95vw] !w-[95vw] h-[90vh] p-0 gap-0 overflow-hidden",children:[(0,a.jsx)(T.c7,{className:"px-6 py-4 border-b border-gray-100 flex-shrink-0",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(T.L3,{className:"text-xl font-semibold text-gray-900",children:"Add Exercise"}),(0,a.jsx)(T.rr,{className:"text-sm text-gray-500 mt-1",children:"Choose from our exercise library and find the perfect exercise for your routine"})]})}),(0,a.jsxs)("div",{className:"flex h-full overflow-hidden",children:[(0,a.jsx)("div",{className:"w-2/3 border-r border-gray-100 flex flex-col bg-gray-50/50 overflow-hidden",children:(0,a.jsxs)("div",{className:"animate-pulse p-6",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)("div",{className:"h-48 bg-gray-200 rounded"},s))})]})}),(0,a.jsx)("div",{className:"w-1/3 flex flex-col bg-white overflow-hidden",children:(0,a.jsxs)("div",{className:"animate-pulse p-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"h-24 bg-gray-200 rounded"})]})})]})]})}):g?(0,a.jsx)(T.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(T.Cf,{className:"!max-w-[95vw] !w-[95vw] h-[90vh] p-0 gap-0 overflow-hidden",children:[(0,a.jsx)(T.c7,{className:"px-6 py-4 border-b border-gray-100 flex-shrink-0",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(T.L3,{className:"text-xl font-semibold text-gray-900",children:"Add Exercise"}),(0,a.jsx)(T.rr,{className:"text-sm text-gray-500 mt-1",children:"Choose from our exercise library and find the perfect exercise for your routine"})]})}),(0,a.jsx)("div",{className:"flex h-full overflow-hidden",children:(0,a.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Failed to Load Exercises"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"There was an error loading the exercise library."}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 text-sm",children:"Retry"})]})})})]})}):(0,a.jsx)(T.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(T.Cf,{className:"!max-w-[95vw] !w-[95vw] h-[90vh] p-0 gap-0 overflow-hidden",children:[(0,a.jsx)(T.c7,{className:"px-6 py-4 border-b border-gray-100 flex-shrink-0",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(T.L3,{className:"text-xl font-semibold text-gray-900",children:"Add Exercise"}),(0,a.jsx)(T.rr,{className:"text-sm text-gray-500 mt-1",children:"Choose from our exercise library and find the perfect exercise for your routine"})]})}),(0,a.jsxs)("div",{className:"flex h-full overflow-hidden",children:[(0,a.jsx)(et,{exercises:p,searchTerm:i,selectedCategory:m,selectedExercise:l,onExerciseSelect:d,onSearchChange:e=>{n(e)},onCategoryChange:u}),(0,a.jsx)(eo,{exercise:l,selectedVariant:c,onVariantSelect:o,onSelectExercise:()=>l&&void(r(l,c||void 0),t(),x()),onClose:t})]})]})})},eu=e=>(0,a.jsx)(ex.g,{children:(0,a.jsx)(em,{...e})});var ep=t(12791),eh=t(60398),eg=t(27222),ev=t(57175),ej=t(98208),ey=t(31514),ef=t(27019),eb=t(65550),eN=t(7096);let ew=[{value:"beginner",label:"Beginner",color:"bg-green-100 text-green-800"},{value:"intermediate",label:"Intermediate",color:"bg-yellow-100 text-yellow-800"},{value:"advanced",label:"Advanced",color:"bg-orange-100 text-orange-800"},{value:"expert",label:"Expert",color:"bg-red-100 text-red-800"}],eC={basic:[{value:"warm-up",label:"Warm-up",icon:ep.A,color:"text-blue-600",description:"Easy preparation phase",autoRepeat:!1},{value:"cool-down",label:"Cool-down",icon:ep.A,color:"text-blue-600",description:"Easy recovery phase",autoRepeat:!1},{value:"run",label:"Run",icon:y.A,color:"text-green-600",description:"Steady running pace",autoRepeat:!1},{value:"walk",label:"Walk",icon:eh.A,color:"text-gray-500",description:"Walking pace section",autoRepeat:!1}],rest:[{value:"rest",label:"Rest",icon:eg.A,color:"text-gray-600",description:"Complete rest (intensity 0)",autoRepeat:!1},{value:"recovery",label:"Recovery",icon:eh.A,color:"text-green-400",description:"Active recovery (intensity 0-1)",autoRepeat:!1}],structured:[{value:"uphill-repeat",label:"Uphill Repeat",icon:ev.A,color:"text-orange-600",description:"Uphill intervals",autoRepeat:!0},{value:"downhill-repeat",label:"Downhill Repeat",icon:ej.A,color:"text-purple-600",description:"Downhill intervals",autoRepeat:!0},{value:"w-series",label:"W Series",icon:ep.A,color:"text-red-600",description:"Paired uphill/downhill intervals",autoRepeat:!0},{value:"caco",label:"CACO (Run/Walk)",icon:y.A,color:"text-blue-600",description:"Alternating run/walk",autoRepeat:!0},{value:"fartlek",label:"Fartlek",icon:ey.A,color:"text-indigo-600",description:"Playful speed variations",autoRepeat:!0},{value:"series",label:"Series",icon:ef.A,color:"text-orange-500",description:"Structured interval series",autoRepeat:!0}]},ek=[{value:"run",label:"Run",icon:ep.A,color:"text-green-600",description:"General running effort"},{value:"uphill",label:"Uphill",icon:ev.A,color:"text-orange-600",description:"Uphill climbing effort"},{value:"downhill",label:"Downhill",icon:ej.A,color:"text-purple-600",description:"Downhill running effort"},{value:"sprint",label:"Sprint",icon:y.A,color:"text-red-600",description:"High intensity burst"},{value:"recovery",label:"Recovery",icon:eh.A,color:"text-green-400",description:"Active recovery"},{value:"rest",label:"Rest",icon:eg.A,color:"text-gray-600",description:"Complete rest"},{value:"walk",label:"Walk",icon:eh.A,color:"text-gray-500",description:"Walking pace"}],eT=[...eC.basic,...eC.rest,...eC.structured],eA=e=>{if(!e)return"Not set";let s=e=>["Active Recovery","Endurance/Base","Aerobic","Tempo/Lactate Threshold","VO2 Max/Lactate","Anaerobic Capacity"][e]||"Unknown";switch(e.type){case"heart-rate":return"HR Zone ".concat(e.value," - ").concat(s(e.value||3));case"speed":if(e.minValue&&e.maxValue)return"".concat(e.minValue,"-").concat(e.maxValue," ").concat(e.unit);if(e.minValue)return"".concat(e.minValue,"+ ").concat(e.unit);if(e.maxValue)return"<".concat(e.maxValue," ").concat(e.unit);return"".concat(e.value||"Not set"," ").concat(e.unit);case"power":return"Power Zone ".concat(e.value," - ").concat(s(e.value||3));case"cadence":return"".concat(e.value," ").concat(e.unit);case"rpe":return"RPE ".concat(e.value,"/10");default:return"Unknown"}},eR=e=>{if(!e)return"bg-gray-200 text-gray-600";switch(e.type){case"heart-rate":{let s=e.value||3;if(0===s)return"bg-gray-200 text-gray-600";if(s<=1)return"bg-green-200 text-green-800";if(s<=2)return"bg-blue-200 text-blue-800";if(s<=3)return"bg-yellow-200 text-yellow-800";if(s<=4)return"bg-orange-200 text-orange-800";return"bg-red-200 text-red-800"}case"speed":return"bg-blue-200 text-blue-800";case"power":{let s=e.value||3;if(0===s)return"bg-gray-200 text-gray-600";if(s<=1)return"bg-green-200 text-green-800";if(s<=2)return"bg-blue-200 text-blue-800";if(s<=3)return"bg-yellow-200 text-yellow-800";if(s<=4)return"bg-orange-200 text-orange-800";return"bg-red-200 text-red-800"}case"cadence":return"bg-green-200 text-green-800";case"rpe":{let s=e.value||5;if(s<=2)return"bg-gray-200 text-gray-600";if(s<=4)return"bg-green-200 text-green-800";if(s<=6)return"bg-yellow-200 text-yellow-800";if(s<=8)return"bg-orange-200 text-orange-800";return"bg-red-200 text-red-800"}default:return"bg-gray-200 text-gray-600"}},eS=e=>{switch(e){case"warm-up":case"walk":case"recovery":return{type:"heart-rate",value:1,unit:"zone"};case"cool-down":return{type:"heart-rate",value:0,unit:"zone"};case"run":case"downhill-repeat":case"fartlek":case"downhill":return{type:"heart-rate",value:3,unit:"zone"};case"uphill-repeat":case"w-series":case"uphill":return{type:"power",value:4,unit:"zone"};case"series":case"sprint":return{type:"power",value:5,unit:"zone"};case"caco":return{type:"rpe",value:4,unit:"RPE"};case"rest":return{type:"rpe",value:1,unit:"RPE"};default:return{type:"rpe",value:5,unit:"RPE"}}},eD=e=>{let{target:s,onChange:t}=e,r=[{value:"heart-rate",label:"Heart Rate",unit:"bpm",icon:"\uD83D\uDC93",description:"Target heart rate zone"},{value:"speed",label:"Speed",unit:"min/km",icon:"\uD83C\uDFC3",description:"Target pace range"},{value:"power",label:"Power Zone",unit:"zone",icon:"⚡",description:"Structured power zones"},{value:"cadence",label:"Cadence",unit:"rpm",icon:"\uD83D\uDD04",description:"Steps per minute"},{value:"rpe",label:"Perceived Exertion",unit:"RPE",icon:"\uD83C\uDFAF",description:"Rate of perceived exertion (1-10)"}],i=s||{type:"rpe",value:5,unit:"RPE"},n=e=>["Active Recovery","Endurance/Base","Aerobic","Tempo/Lactate Threshold","VO2 Max/Lactate","Anaerobic Capacity"][e]||"Unknown";return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(A.J,{children:"Intensity Target"}),(0,a.jsxs)(z.l6,{value:i.type,onValueChange:e=>{let s=r.find(s=>s.value===e);if(!s)return;let a={type:e,unit:s.unit};switch(e){case"heart-rate":case"power":a.value=3;break;case"speed":a.minValue="5:00",a.maxValue="5:59";break;case"cadence":a.value=180;break;case"rpe":a.value=5}t(a)},children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsx)(z.gC,{children:r.map(e=>(0,a.jsx)(z.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:e.label}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]})},e.value))})]}),(()=>{var e,s,r;switch(i.type){case"heart-rate":return(0,a.jsxs)(z.l6,{value:(null==(e=i.value)?void 0:e.toString())||"3",onValueChange:e=>t({...i,value:parseInt(e)}),children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsx)(z.gC,{children:[0,1,2,3,4,5].map(e=>(0,a.jsx)(z.eb,{value:e.toString(),children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{children:["Heart Rate Zone ",e]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:n(e)})]})},e))})]});case"power":return(0,a.jsxs)(z.l6,{value:(null==(s=i.value)?void 0:s.toString())||"3",onValueChange:e=>t({...i,value:parseInt(e)}),children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsx)(z.gC,{children:[0,1,2,3,4,5].map(e=>(0,a.jsx)(z.eb,{value:e.toString(),children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{children:["Power Zone ",e]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:n(e)})]})},e))})]});case"speed":return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(A.J,{className:"text-xs",children:"Min Pace"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(E.p,{type:"text",placeholder:"5:00",value:i.minValue||"",onChange:e=>{let s=e.target.value;(""===s||/^(\d{1,2}(:[0-5]?\d?)?)?$/.test(s))&&t({...i,minValue:s||void 0})},onBlur:e=>{let s=e.target.value;if(s&&!/^\d{1,2}:[0-5]\d$/.test(s)){if(/^\d{1,2}$/.test(s)){let e="".concat(s,":00");t({...i,minValue:e})}else if(/^\d{1,2}:\d$/.test(s)){let e=s.replace(/(\d{1,2}):(\d)$/,"$1:0$2");t({...i,minValue:e})}}},className:"pr-16",maxLength:5}),(0,a.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground pointer-events-none",children:"min/km"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(A.J,{className:"text-xs",children:"Max Pace"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(E.p,{type:"text",placeholder:"5:59",value:i.maxValue||"",onChange:e=>{let s=e.target.value;(""===s||/^(\d{1,2}(:[0-5]?\d?)?)?$/.test(s))&&t({...i,maxValue:s||void 0})},onBlur:e=>{let s=e.target.value;if(s&&!/^\d{1,2}:[0-5]\d$/.test(s)){if(/^\d{1,2}$/.test(s)){let e="".concat(s,":00");t({...i,maxValue:e})}else if(/^\d{1,2}:\d$/.test(s)){let e=s.replace(/(\d{1,2}):(\d)$/,"$1:0$2");t({...i,maxValue:e})}}},className:"pr-16",maxLength:5}),(0,a.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-muted-foreground pointer-events-none",children:"min/km"})]})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set pace range for this interval (e.g., 5:00-5:59 min/km)"})]});case"cadence":return(0,a.jsx)(E.p,{type:"number",placeholder:"Cadence (RPM)",value:i.value||"",onChange:e=>t({...i,value:parseInt(e.target.value)||void 0})});case"rpe":return(0,a.jsxs)(z.l6,{value:(null==(r=i.value)?void 0:r.toString())||"5",onValueChange:e=>t({...i,value:parseInt(e)}),children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsx)(z.gC,{children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,a.jsx)(z.eb,{value:e.toString(),children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{children:["RPE ",e,"/10"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:["","Very Easy - Minimal effort","Easy - Light effort","Moderate - Some effort","Somewhat Hard - Noticeable effort","Hard - Strong effort","Harder - Very strong effort","Very Hard - Very strong effort","Very, Very Hard - Maximal effort","Near Maximal - Almost all-out","Maximal - All-out effort"][e]||"Unknown"})]})},e))})]});default:return null}})()]})};function eM(e){var s,t,r;let{onSave:i,onCancel:n,initialData:l,mode:c}=e,[d,o]=(0,C.useState)(l||{id:Date.now().toString(),name:"",description:"",type:"trail-running",difficulty:"intermediate",estimatedDuration:0,targetDistance:0,elevationGain:0,sections:[]}),[x,m]=(0,C.useState)({type:"warm-up",intensityTarget:{type:"rpe",value:3,unit:"RPE"},isRepeated:!1,repeatCount:1}),[u,p]=(0,C.useState)([]),[h,g]=(0,C.useState)(null),[y,f]=(0,C.useState)(!1),b=e=>({"uphill-repeat":{repeatCount:6,intervals:[{name:"Hill Climb",type:"uphill",distance:.2,intensityTarget:{type:"power",value:4,unit:"zone"},elevationChange:30},{name:"Recovery Jog",type:"recovery",distance:.2,intensityTarget:{type:"heart-rate",value:1,unit:"zone"},elevationChange:-30}]},"downhill-repeat":{repeatCount:6,intervals:[{name:"Downhill Run",type:"downhill",distance:.3,intensityTarget:{type:"heart-rate",value:3,unit:"zone"},elevationChange:-40},{name:"Easy Recovery",type:"recovery",distance:.2,intensityTarget:{type:"heart-rate",value:1,unit:"zone"},elevationChange:20}]},"w-series":{repeatCount:6,intervals:[{name:"Uphill Segment",type:"uphill",distance:.4,intensityTarget:{type:"power",value:4,unit:"zone"},elevationChange:40},{name:"Downhill Segment",type:"downhill",distance:.4,intensityTarget:{type:"power",value:4,unit:"zone"},elevationChange:-40}]},caco:{repeatCount:8,intervals:[{name:"Run Segment",type:"run",distance:.4,duration:2,intensityTarget:{type:"heart-rate",value:2,unit:"zone"}},{name:"Walk Break",type:"walk",distance:.4,duration:2,intensityTarget:{type:"heart-rate",value:1,unit:"zone"}}]},fartlek:{repeatCount:5,intervals:[{name:"Fast Surge",type:"sprint",distance:.3,intensityTarget:{type:"heart-rate",value:4,unit:"zone"}},{name:"Easy Recovery",type:"recovery",distance:.5,intensityTarget:{type:"heart-rate",value:1,unit:"zone"}}]},series:{repeatCount:4,intervals:[{name:"Work Interval",type:"run",distance:.8,intensityTarget:{type:"power",value:5,unit:"zone"}},{name:"Rest Break",type:"rest",duration:3}]}})[e];(0,C.useEffect)(()=>{let e=(e=>{let s=0,t=0,a=0,r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.distance&&(s+=e.distance*r),e.duration&&(t+=e.duration*r),e.elevationChange&&(a+=Math.max(0,e.elevationChange)*r)};return e.forEach(e=>{e.isRepeated&&e.repeatSections&&e.repeatCount?e.repeatSections.forEach(s=>{r(s,e.repeatCount)}):r(e)}),{distance:Math.round(10*s)/10,duration:Math.round(t),elevation:Math.round(a)}})(d.sections);o(s=>({...s,targetDistance:e.distance,estimatedDuration:e.duration,elevationGain:e.elevation}))},[d.sections]);let N=(e,s)=>{let t;return s&&0!==e.length?"rest"===(t=e[e.length-1]).type||"recovery"===t.type?e.slice(0,-1):e:e},w=(e,s,t)=>{p(a=>a.map((a,r)=>{if(r===e){let e={...a,[s]:t};return"type"===s&&"rest"===t&&(e.distance=void 0,e.elevationChange=void 0,e.intensityTarget=void 0),e}return a}))},T=e=>({"warm-up":"Warm-up Phase","cool-down":"Cool-down Phase",run:"Running Section",walk:"Walking Section","uphill-repeat":"Uphill Repeats","downhill-repeat":"Downhill Repeats","w-series":"W Series",recovery:"Recovery Run",rest:"Rest Break",caco:"CACO Run/Walk",fartlek:"Fartlek Play",series:"Section Series"})[e]||"Training Section",R=d.name.trim()&&d.sections.length>0;return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center",children:(0,a.jsx)(ev.A,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"create"===c?"Create Trail Running Workout":"Edit Trail Running Workout"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Design your trail running adventure"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(k.$,{variant:"outline",onClick:n,children:"Cancel"}),(0,a.jsx)(k.$,{onClick:()=>i(d),disabled:!R,className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700",children:"create"===c?"Add Workout":"Save Changes"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsx)(M.Zp,{children:(0,a.jsxs)(M.Wu,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[d.targetDistance,"km"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Distance"})]})}),(0,a.jsx)(M.Zp,{children:(0,a.jsxs)(M.Wu,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[d.estimatedDuration,"min"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Duration"})]})}),(0,a.jsx)(M.Zp,{children:(0,a.jsxs)(M.Wu,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["+",d.elevationGain,"m"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Elevation Gain"})]})})]}),(0,a.jsxs)(M.Zp,{className:"mb-6",children:[(0,a.jsx)(M.aR,{children:(0,a.jsx)(M.ZB,{children:"Workout Overview"})}),(0,a.jsxs)(M.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"name",children:"Workout Name"}),(0,a.jsx)(E.p,{id:"name",placeholder:"e.g., Mountain Peak Challenge",value:d.name,onChange:e=>o(s=>({...s,name:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"difficulty",children:"Difficulty Level"}),(0,a.jsxs)(z.l6,{value:d.difficulty,onValueChange:e=>o(s=>({...s,difficulty:e})),children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsx)(z.gC,{children:ew.map(e=>(0,a.jsx)(z.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full ".concat(e.color.split(" ")[0])}),(0,a.jsx)("span",{children:e.label})]})},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)("textarea",{id:"description",className:"w-full min-h-[100px] px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe your trail running workout, terrain challenges, and what makes it special...",value:d.description,onChange:e=>o(s=>({...s,description:e.target.value}))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(M.Zp,{className:"h-[600px] flex flex-col",children:[(0,a.jsx)(M.aR,{className:"flex-shrink-0",children:(0,a.jsxs)(M.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:h?"Edit Training Section":"Add Training Section"}),h&&(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>{g(null);let e="warm-up",s=eT.find(s=>s.value===e),t=(null==s?void 0:s.autoRepeat)||!1,a=t?b(e):null;m({type:e,intensityTarget:{type:"rpe",value:5,unit:"RPE"},isRepeated:t,repeatCount:(null==a?void 0:a.repeatCount)||1,name:T(e)}),t&&(null==a?void 0:a.intervals)?p(a.intervals.map((e,s)=>{let t={...e,id:"".concat(Date.now(),"-").concat(s),type:e.type||"run",intensityTarget:e.intensityTarget?{...e.intensityTarget,type:e.intensityTarget.type}:void 0};return"rest"===t.type&&delete t.intensityTarget,t})):p([]),f(!1)},className:"text-gray-600 hover:text-gray-700",children:"Cancel Edit"})]})}),(0,a.jsxs)(M.Wu,{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(A.J,{className:"text-sm font-medium",children:"Section Type"}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)(z.l6,{value:x.type,onValueChange:e=>{let s=eT.find(s=>s.value===e),t=eS(e),a=(null==s?void 0:s.autoRepeat)||!1,r=a?b(e):null;m(s=>({...s,type:e,intensityTarget:t,isRepeated:a,repeatCount:(null==r?void 0:r.repeatCount)||1,name:s.name||T(e)})),a&&(null==r?void 0:r.intervals)?p(r.intervals.map((e,s)=>{let t={...e,id:"".concat(Date.now(),"-").concat(s),type:e.type||"run",intensityTarget:e.intensityTarget?{...e.intensityTarget,type:e.intensityTarget.type}:void 0};return"rest"===t.type&&delete t.intensityTarget,t})):a||p([])},children:[(0,a.jsx)(z.bq,{className:"h-12",children:(0,a.jsx)(z.yv,{children:x.type&&(()=>{let e=eT.find(e=>e.value===x.type);if(e){let s=e.icon;return(0,a.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(s,{className:"w-5 h-5 ".concat(e.color)}),(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]})]})})}return null})()})}),(0,a.jsxs)(z.gC,{className:"w-full",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground bg-muted/30",children:"Basic Types"}),eC.basic.map(e=>{let s=e.icon;return(0,a.jsx)(z.eb,{value:e.value,className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 w-full",children:[(0,a.jsx)(s,{className:"w-4 h-4 ".concat(e.color," flex-shrink-0")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:(0,a.jsx)("span",{className:"font-medium",children:e.label})}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})},e.value)}),(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground bg-muted/30 mt-1",children:"Rest & Recovery"}),eC.rest.map(e=>{let s=e.icon;return(0,a.jsx)(z.eb,{value:e.value,className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 w-full",children:[(0,a.jsx)(s,{className:"w-4 h-4 ".concat(e.color," flex-shrink-0")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:(0,a.jsx)("span",{className:"font-medium",children:e.label})}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})},e.value)}),(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground bg-muted/30 mt-1",children:"Structured Types"}),eC.structured.map(e=>{let s=e.icon;return(0,a.jsx)(z.eb,{value:e.value,className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 w-full",children:[(0,a.jsx)(s,{className:"w-4 h-4 ".concat(e.color," flex-shrink-0")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:(0,a.jsx)("span",{className:"font-medium",children:e.label})}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})},e.value)})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{className:"text-sm font-medium",children:"Section Name"}),(0,a.jsx)(E.p,{placeholder:"e.g., Steep Ascent to Summit",value:x.name||"",onChange:e=>m(s=>({...s,name:e.target.value})),className:"h-10"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(eN.d,{checked:x.isRepeated||!1,onCheckedChange:e=>{if(m(s=>({...s,isRepeated:e})),e){let e=b(x.type||"warm-up");e&&(m(s=>({...s,repeatCount:e.repeatCount})),p(e.intervals.map((e,s)=>{let t={...e,id:"".concat(Date.now(),"-").concat(s),type:e.type||"run",intensityTarget:e.intensityTarget?{...e.intensityTarget,type:e.intensityTarget.type}:void 0};return"rest"===t.type&&delete t.intensityTarget,t})))}else p([])}}),(0,a.jsx)(A.J,{className:"text-sm font-medium",children:"Create Repeated Section Block"})]})}),(null==(s=eT.find(e=>e.value===x.type))?void 0:s.autoRepeat)&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("span",{className:"text-sm text-white",children:"\uD83D\uDCA1"})}),(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Template Applied"}),(0,a.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed",children:["We've automatically configured this"," ",null==(t=eT.find(e=>e.value===x.type))?void 0:t.label.toLowerCase()," ","with"," ",null==(r=b(x.type||"warm-up"))?void 0:r.repeatCount," ","repetitions and suggested intervals. You can customize them below."]})]})]})}),x.isRepeated&&(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{className:"text-sm font-medium",children:"Number of Repetitions"}),(0,a.jsx)(E.p,{type:"number",min:"1",max:"20",value:x.repeatCount||1,onChange:e=>m(s=>({...s,repeatCount:parseInt(e.target.value)||1})),className:"h-10"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(eN.d,{checked:y,onCheckedChange:f}),(0,a.jsx)(A.J,{className:"text-sm",children:"Skip last rest/recovery interval"})]})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"When enabled, the last interval will be removed if it's a rest or recovery type"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(A.J,{className:"text-sm font-medium",children:"Intervals"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[b(x.type||"warm-up")&&0===u.length&&(0,a.jsx)(k.$,{size:"sm",variant:"outline",onClick:()=>{let e=b(x.type||"warm-up");e&&p(e.intervals.map((e,s)=>{let t={...e,id:"".concat(Date.now(),"-").concat(s),type:e.type||"run",intensityTarget:e.intensityTarget?{...e.intensityTarget,type:e.intensityTarget.type}:void 0};return"rest"===t.type&&delete t.intensityTarget,t}))},className:"text-blue-600 border-blue-300 hover:bg-blue-50 h-8",children:"Use Template"}),(0,a.jsxs)(k.$,{size:"sm",onClick:()=>{p(e=>{let s=(e=>{switch(x.type){case"uphill-repeat":return e%2==0?"uphill":"recovery";case"downhill-repeat":return e%2==0?"downhill":"recovery";case"w-series":return e%2==0?"uphill":"downhill";case"fartlek":return e%2==0?"sprint":"recovery";case"series":return e%2==0?"run":"rest";case"caco":return e%2==0?"run":"walk";default:return"run"}})(e.length),t={type:s,name:"Interval ".concat(e.length+1)};return"rest"!==s&&(t.intensityTarget=eS(s)),[...e,t]})},className:"bg-orange-600 hover:bg-orange-700 h-8",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-1"}),"Add Interval"]})]})]}),u.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded p-3 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(E.p,{placeholder:"Interval name",value:e.name||"",onChange:e=>w(s,"name",e.target.value),className:"flex-1 mr-2"}),(0,a.jsx)(k.$,{size:"sm",variant:"ghost",onClick:()=>{p(e=>e.filter((e,t)=>t!==s))},className:"text-red-600",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{className:"text-xs",children:"Type"}),(0,a.jsxs)(z.l6,{value:e.type||"run",onValueChange:e=>w(s,"type",e),children:[(0,a.jsx)(z.bq,{className:"text-xs",children:(0,a.jsx)(z.yv,{})}),(0,a.jsx)(z.gC,{children:ek.map(e=>{let s=e.icon;return(0,a.jsx)(z.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(s,{className:"w-3 h-3 ".concat(e.color)}),(0,a.jsx)("span",{className:"text-xs",children:e.label})]})},e.value)})})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:"rest"===e.type?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,a.jsx)("span",{children:"Duration (min)"})}),(0,a.jsx)(E.p,{type:"number",placeholder:"2",value:e.duration||"",onChange:e=>w(s,"duration",parseInt(e.target.value)||0)})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Distance (km)"}),(0,a.jsx)("span",{children:"Duration (min)"}),(0,a.jsx)("span",{children:"Elevation (m)"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsx)(E.p,{type:"number",step:"0.1",placeholder:"0.5",value:e.distance||"",onChange:e=>w(s,"distance",parseFloat(e.target.value)||0)}),(0,a.jsx)(E.p,{type:"number",placeholder:"5",value:e.duration||"",onChange:e=>w(s,"duration",parseInt(e.target.value)||0)}),(0,a.jsx)(E.p,{type:"number",placeholder:"30",value:e.elevationChange||"",onChange:e=>w(s,"elevationChange",parseInt(e.target.value)||0)})]})]})}),"rest"!==e.type&&(0,a.jsx)(eD,{target:e.intensityTarget,onChange:e=>w(s,"intensityTarget",e)})]},s))]})]})]}),!x.isRepeated&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{children:"Distance (km)"}),(0,a.jsx)(E.p,{type:"number",step:"0.1",placeholder:"2.5",value:x.distance||"",onChange:e=>m(s=>({...s,distance:parseFloat(e.target.value)||void 0}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{children:"Duration (min)"}),(0,a.jsx)(E.p,{type:"number",placeholder:"15",value:x.duration||"",onChange:e=>m(s=>({...s,duration:parseInt(e.target.value)||void 0}))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{children:"Elevation Change (m)"}),(0,a.jsx)(E.p,{type:"number",placeholder:"e.g., 200 (positive for uphill)",value:x.elevationChange||"",onChange:e=>m(s=>({...s,elevationChange:parseInt(e.target.value)||void 0}))})]})]}),!x.isRepeated&&"rest"!==x.type&&(0,a.jsx)(eD,{target:x.intensityTarget,onChange:e=>m(s=>({...s,intensityTarget:e}))}),(0,a.jsx)(k.$,{onClick:()=>{if(!x.name)return;if(h){let e=x.isRepeated?N(u,y):void 0,s={...h,type:x.type||"warm-up",name:x.name,distance:x.distance,duration:x.duration,elevationChange:x.elevationChange,intensityTarget:x.intensityTarget||{type:"rpe",value:5,unit:"RPE"},isRepeated:x.isRepeated||!1,repeatCount:x.isRepeated?x.repeatCount:void 0,repeatSections:e?e.map(e=>({...e,id:e.id||Date.now().toString()+Math.random(),name:e.name||"Unnamed Interval",type:e.type||"run",intensityTarget:e.intensityTarget||eS(e.type||"run")})):void 0};x.isRepeated&&(s.skipLastRest=y),o(e=>({...e,sections:e.sections.map(e=>e.id===h.id?s:e)})),g(null)}else{let e=x.isRepeated?N(u,y):void 0,s={id:Date.now().toString(),type:x.type||"warm-up",name:x.name,distance:x.distance,duration:x.duration,elevationChange:x.elevationChange,intensityTarget:x.intensityTarget||{type:"rpe",value:5,unit:"RPE"},isRepeated:x.isRepeated||!1,repeatCount:x.isRepeated?x.repeatCount:void 0,repeatSections:e?e.map(e=>({...e,id:e.id||Date.now().toString()+Math.random(),name:e.name||"Unnamed Interval",type:e.type||"run",intensityTarget:e.intensityTarget||eS(e.type||"run")})):void 0};x.isRepeated&&(s.skipLastRest=y),o(e=>({...e,sections:[...e.sections,s]}))}let e="warm-up",s=eT.find(s=>s.value===e),t=(null==s?void 0:s.autoRepeat)||!1,a=t?b(e):null;m({type:e,intensityTarget:{type:"rpe",value:5,unit:"RPE"},isRepeated:t,repeatCount:(null==a?void 0:a.repeatCount)||1,name:T(e)}),t&&(null==a?void 0:a.intervals)?p(a.intervals.map((e,s)=>{let t={...e,id:"".concat(Date.now(),"-").concat(s),type:e.type||"run",intensityTarget:e.intensityTarget?{...e.intensityTarget,type:e.intensityTarget.type}:void 0};return"rest"===t.type&&delete t.intensityTarget,t})):p([]),f(!1)},disabled:!x.name,className:"w-full bg-orange-600 hover:bg-orange-700",children:h?"Update Section":"Add Section"})]})]}),(0,a.jsxs)(M.Zp,{className:"h-[600px] flex flex-col",children:[(0,a.jsx)(M.aR,{className:"flex-shrink-0",children:(0,a.jsxs)(M.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Training Sections (",d.sections.length,")"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[d.targetDistance,"km •"," ",d.estimatedDuration,"min"]})]})}),(0,a.jsx)(M.Wu,{className:"flex-1 overflow-y-auto pr-2",children:0===d.sections.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No sections added yet"}):(0,a.jsx)("div",{className:"space-y-3",children:d.sections.map(e=>{var s,t;let r=(null==(s=eT.find(s=>s.value===e.type))?void 0:s.icon)||eb.A,i=(null==(t=eT.find(s=>s.value===e.type))?void 0:t.color)||"text-gray-600";return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r,{className:"w-4 h-4 ".concat(i)}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),e.isRepeated&&(0,a.jsxs)(D.E,{variant:"outline",className:"text-xs",children:[(0,a.jsx)(ef.A,{className:"w-3 h-3 mr-1"}),e.repeatCount,"x"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>{g(e),m({type:e.type,name:e.name,distance:e.distance,duration:e.duration,elevationChange:e.elevationChange,intensityTarget:e.intensityTarget,isRepeated:e.isRepeated,repeatCount:e.repeatCount}),e.isRepeated&&e.repeatSections?(p(e.repeatSections.map(e=>({...e}))),f(e.skipLastRest||!1)):(p([]),f(!1))},className:"text-blue-600 hover:text-blue-700",children:"Edit"}),(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>{var s;return s=e.id,void o(e=>({...e,sections:e.sections.filter(e=>e.id!==s)}))},className:"text-red-600 hover:text-red-700",children:"Remove"})]})]}),e.isRepeated&&e.repeatSections?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Block Overview"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-xs text-blue-600",children:[e.repeatCount," repetitions"]}),e.skipLastRest&&(0,a.jsx)(D.E,{variant:"outline",className:"text-xs bg-orange-50 text-orange-600 border-orange-200",children:"Skip last rest"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-blue-600 block",children:"Total Distance"}),(0,a.jsxs)("span",{className:"font-medium text-blue-900",children:[Number((e.repeatSections.reduce((e,s)=>e+(s.distance||0),0)*(e.repeatCount||1)).toFixed(2)),"km"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-blue-600 block",children:"Total Duration"}),(0,a.jsxs)("span",{className:"font-medium text-blue-900",children:[e.repeatSections.reduce((e,s)=>e+(s.duration||0),0)*(e.repeatCount||1),"min"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Per Repetition:"}),(0,a.jsx)("div",{className:"space-y-2",children:e.repeatSections.map((e,s)=>(0,a.jsxs)("div",{className:"ml-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name}),"rest"!==e.type&&(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(eR(e.intensityTarget)),children:eA(e.intensityTarget)})]}),"rest"===e.type?(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 block",children:"Duration"}),(0,a.jsx)("span",{className:"font-medium",children:e.duration?"".concat(e.duration,"min"):"Not set"})]})}):(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 block",children:"Distance"}),(0,a.jsx)("span",{children:e.distance?"".concat(e.distance,"km"):"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 block",children:"Duration"}),(0,a.jsx)("span",{children:e.duration?"".concat(e.duration,"min"):"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 block",children:"Elevation"}),(0,a.jsx)("span",{children:e.elevationChange?"".concat(e.elevationChange>0?"+":"").concat(e.elevationChange,"m"):"0m"})]})]})]},s))})]})]}):(0,a.jsxs)("div",{className:"space-y-3",children:["rest"!==e.type&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Intensity:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(eR(e.intensityTarget)),children:eA(e.intensityTarget)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 block",children:"Distance"}),(0,a.jsx)("span",{className:"font-medium",children:e.distance?"".concat(e.distance,"km"):"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 block",children:"Duration"}),(0,a.jsx)("span",{className:"font-medium",children:e.duration?"".concat(e.duration,"min"):"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 block",children:"Elevation"}),(0,a.jsx)("span",{className:"font-medium",children:e.elevationChange?"".concat(e.elevationChange>0?"+":"").concat(e.elevationChange,"m"):"0m"})]})]})]})]},e.id)})})})]})]})]})]})}var eE=t(74267);function ez(e){let{sets:s,onSetsChange:t,onNotesClick:r,progressionMethod:i}=e,[n,c]=(0,C.useState)(null),[d,o]=(0,C.useState)(!1),x=i?({linear:{allowRepTypeChange:!0,allowSetTypeChange:!0,allowAddRemoveSets:!0,allowRepsChange:!0,allowRpeChange:!0,lockMessage:"Linear progression uses fixed reps and structure",description:"Fixed 3x5 structure"},dual:{allowRepTypeChange:!0,allowSetTypeChange:!0,allowAddRemoveSets:!0,allowRepsChange:!0,allowRpeChange:!0,lockMessage:"Dual progression uses rep ranges",description:"Rep ranges with progression"},"inverse-pyramid":{allowRepTypeChange:!0,allowSetTypeChange:!0,allowAddRemoveSets:!0,allowRepsChange:!0,allowRpeChange:!0,lockMessage:"Inverse pyramid structure is predefined",description:"Decreasing weight, increasing reps"},"myo-reps":{allowRepTypeChange:!0,allowSetTypeChange:!0,allowAddRemoveSets:!0,allowRepsChange:!0,allowRpeChange:!0,lockMessage:"Myo-reps structure is predefined",description:"Activation set + mini-sets"},widowmaker:{allowRepTypeChange:!0,allowSetTypeChange:!0,allowAddRemoveSets:!0,allowRepsChange:!0,allowRpeChange:!0,lockMessage:"Widowmaker is a single failure set",description:"Single high-rep failure set"},amrap:{allowRepTypeChange:!0,allowSetTypeChange:!0,allowAddRemoveSets:!0,allowRepsChange:!0,allowRpeChange:!0,lockMessage:"AMRAP structure is predefined",description:"Regular sets + final AMRAP"}})[i]:null;(0,C.useEffect)(()=>{d||(s.filter(e=>!e.repType).length>0&&t(s.map(e=>({...e,repType:e.repType||"fixed"}))),o(!0))},[s,t,d]);let m=(e,a)=>{t(s.map(s=>{if(s.id===e){let e={...s,...a};return"failure"===a.setType&&(e.repType="fixed",e.reps=null,e.repsMin=void 0,e.repsMax=void 0),a.repType&&"failure"!==e.setType&&("fixed"===a.repType?(e.repsMin=void 0,e.repsMax=void 0):"range"===a.repType&&(e.reps=null)),e}return s}))},u=[{value:"normal",label:"Normal Set",icon:null},{value:"warmup",label:"Warm-up Set",icon:(0,a.jsx)(l.A,{className:"w-4 h-4"})},{value:"failure",label:"Failure Set",icon:(0,a.jsx)(eE.A,{className:"w-4 h-4"})},{value:"dropset",label:"Drop Set",icon:(0,a.jsx)(ep.A,{className:"w-4 h-4"})}];return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:i&&x&&(0,a.jsx)(D.E,{variant:"outline",className:"text-xs",children:x.description})}),(0,a.jsxs)(k.$,{onClick:()=>{let e={id:Date.now().toString(),setNumber:s.length+1,setType:"normal",repType:"fixed",reps:null,repsMin:void 0,repsMax:void 0,weight:null,rpe:null,notes:""};t([...s,e])},size:"sm",variant:"outline",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-1"}),"Add Set"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-8 gap-2 text-sm font-medium text-gray-600 border-b border-gray-200 pb-2",children:[(0,a.jsx)("div",{className:"col-span-1",children:"SET"}),(0,a.jsx)("div",{className:"col-span-1",children:"REPS"}),(0,a.jsx)("div",{className:"col-span-2",children:"REP VALUES"}),(0,a.jsx)("div",{className:"col-span-1",children:"WEIGHT (KG)"}),(0,a.jsx)("div",{className:"col-span-1",children:"RPE"}),(0,a.jsx)("div",{className:"col-span-1",children:"NOTES"}),(0,a.jsx)("div",{className:"col-span-1"})]}),(0,a.jsx)("div",{className:"space-y-2",children:s.map((e,i)=>(0,a.jsxs)("div",{className:"grid grid-cols-8 gap-2 items-center py-2",children:[(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)(K.AM,{open:n===e.id,onOpenChange:s=>c(s?e.id:null),children:[(0,a.jsx)(K.Wv,{asChild:!0,children:(0,a.jsx)(k.$,{variant:"ghost",size:"sm",className:"w-10 h-8 p-0 relative flex items-center justify-center rounded text-sm font-medium hover:opacity-80 ".concat("normal"!==e.setType?(e=>{switch(e){case"warmup":return"bg-orange-100 text-orange-800 border-orange-200";case"failure":return"bg-red-100 text-red-800 border-red-200";case"dropset":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.setType):"bg-gray-100 text-gray-800"),children:(0,a.jsx)("span",{children:((e,t)=>{if("normal"===e.setType)return(s.slice(0,t).filter(e=>"normal"===e.setType).length+1).toString();switch(e.setType){case"warmup":return"W";case"failure":return"F";case"dropset":return"D";default:return(t+1).toString()}})(e,i)})})}),(0,a.jsx)(K.hl,{className:"w-48 p-2",align:"start",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Set Type"}),u.map(s=>(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>{m(e.id,{setType:s.value}),c(null)},className:"w-full justify-start h-8 ".concat(e.setType===s.value?"bg-primary/10 text-primary":""),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s.icon,(0,a.jsx)("span",{className:"text-xs",children:s.label})]})},s.value))]})})]})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)(z.l6,{value:e.repType||"fixed",onValueChange:s=>m(e.id,{repType:s}),disabled:"failure"===e.setType,children:[(0,a.jsx)(z.bq,{className:"w-full h-8 ".concat("failure"===e.setType?"opacity-50 cursor-not-allowed":""),children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:"fixed",children:"Fixed"}),(0,a.jsx)(z.eb,{value:"range",children:"Range"})]})]})}),(0,a.jsx)("div",{className:"col-span-2",children:"failure"===e.setType?(0,a.jsx)("div",{className:"flex items-center justify-center h-8 text-xs text-red-600 font-medium bg-red-50 border border-red-200 rounded",children:"To failure"}):"range"===e.repType?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(E.p,{type:"number",placeholder:"Min",value:e.repsMin||"",onChange:s=>m(e.id,{repsMin:s.target.value?parseInt(s.target.value):void 0}),className:"h-8 text-center",min:"0"}),(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"-"}),(0,a.jsx)(E.p,{type:"number",placeholder:"Max",value:e.repsMax||"",onChange:s=>m(e.id,{repsMax:s.target.value?parseInt(s.target.value):void 0}),className:"h-8 text-center",min:"0"})]}):(0,a.jsx)(E.p,{type:"number",placeholder:"10",value:e.reps||"",onChange:s=>m(e.id,{reps:s.target.value?parseInt(s.target.value):null}),className:"h-8 text-center",min:"0"})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(E.p,{type:"number",placeholder:"0",value:e.weight||"",onChange:s=>m(e.id,{weight:s.target.value?parseFloat(s.target.value):null}),className:"h-8 text-center",min:"0",step:"0.5"})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(E.p,{type:"number",placeholder:"8",value:e.rpe||"",onChange:s=>m(e.id,{rpe:s.target.value?parseInt(s.target.value):null}),className:"h-8 text-center",min:"1",max:"10"})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:"h-8 w-8 p-0 flex items-center justify-center ".concat(e.notes?"text-blue-600":"text-gray-400"),title:e.notes?"Edit notes":"Add notes",children:"\uD83D\uDCDD"})}),(0,a.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>{var a;return a=e.id,void t(s.filter(e=>e.id!==a).map((e,s)=>({...e,setNumber:s+1})))},className:"h-8 w-8 p-0 text-gray-400 hover:text-red-600",title:"Delete set",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})})]},e.id))}),0===s.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(l.A,{className:"w-12 h-12 mx-auto text-gray-300"})}),(0,a.jsx)("p",{children:"No sets added yet"}),(0,a.jsx)("p",{className:"text-sm",children:'Click "Add Set" to get started'})]})]})}function e$(e){let{editRoutineId:s,mode:t="create"}=e,T=(0,w.useRouter)(),[$,W]=(0,C.useState)(""),[F,J]=(0,C.useState)("4"),[L,q]=(0,C.useState)("Beginner"),[_,O]=(0,C.useState)(""),[G,Z]=(0,C.useState)(""),[U,H]=(0,C.useState)(!1),[K,Y]=(0,C.useState)(!1),[Q,X]=(0,C.useState)(!1),[ee,es]=(0,C.useState)(null),[et,ea]=(0,C.useState)(null),[er,ei]=(0,C.useState)(null),[en,el]=(0,C.useState)(new Set),[ec,ed]=(0,C.useState)(new Set),[eo,ex]=(0,C.useState)([]),[em,ep]=(0,C.useState)([]);(0,C.useEffect)(()=>{if("edit"===t&&s){let e=[{id:"1",name:"Full Body Strength A",type:"strength",objective:"Build foundational strength across all major muscle groups with compound movements",schedule:{weeks:"Week 1, 3, 5",day:"Monday",time:"9:00 AM"},sections:[{id:"1",name:"Warm-up",type:"warmup",restAfter:"02:00",exercises:[{id:"1",name:"Dynamic Stretching",sets:[{id:"1",setNumber:1,setType:"normal",repType:"fixed",reps:null,weight:null,rpe:null,notes:""}],restTimer:"00:15",restAfter:"01:00",notes:"",progressionMethod:"linear"}]},{id:"2",name:"Basic Workout",type:"basic",restAfter:"03:00",exercises:[{id:"2",name:"Barbell Squat",sets:[{id:"1",setNumber:1,setType:"warmup",repType:"fixed",reps:10,weight:60,rpe:6,notes:""},{id:"2",setNumber:2,setType:"normal",repType:"range",reps:null,repsMin:8,repsMax:12,weight:80,rpe:8,notes:""},{id:"3",setNumber:3,setType:"normal",repType:"range",reps:null,repsMin:8,repsMax:12,weight:80,rpe:8,notes:""},{id:"4",setNumber:4,setType:"failure",repType:"fixed",reps:null,weight:70,rpe:10,notes:""}],restTimer:"02:00",restAfter:"02:30",notes:"Focus on depth and controlled movement",progressionMethod:"dual"}]},{id:"3",name:"Cool-down",type:"cooldown",restAfter:"00:00",exercises:[{id:"3",name:"Static Stretching",sets:[],restTimer:"00:00",restAfter:"00:00",notes:"",progressionMethod:"linear"}]}]}];W("Full Body Split"),J("8"),q("Intermediate"),O("A comprehensive full-body workout targeting all major muscle groups with compound movements."),Z("Build strength, increase muscle mass, and improve overall fitness through progressive overload"),ex(e),ep(em)}},[t,s]);let eh=[{value:"linear",label:"Linear Progression",description:"Increase weight consistently each session"},{value:"dual",label:"Dual Progression",description:"Progress reps first, then weight"},{value:"inverse-pyramid",label:"Inverse Pyramid",description:"Start heavy, decrease weight and increase reps"},{value:"myo-reps",label:"Myo-Reps",description:"Activation set followed by mini-sets to failure"},{value:"widowmaker",label:"Widowmaker",description:"Single high-rep set with moderate weight"},{value:"amrap",label:"AMRAP",description:"As Many Reps As Possible on final set"}],eg=()=>{let e="Strength Workout ".concat(eo.length+1);ex([...eo,{id:Date.now().toString(),name:e,type:"strength",objective:"",schedule:{weeks:"",day:"Monday",time:""},sections:[]}])},ev=()=>{X(!0)},ej=e=>{ee?(ep(em.map(s=>s.id===ee.workoutId?{...s,name:e.name,objective:e.description,trailRunningData:e}:s)),es(null)):(ep([...em,{id:Date.now().toString(),name:e.name,type:"running",objective:e.description,schedule:{weeks:"Week 1, 2, 3",day:"Tuesday",time:"10:00 AM"},sections:[],trailRunningData:e}]),X(!1))},ey=()=>{X(!1),es(null)},ef=e=>{ex(eo.filter(s=>s.id!==e))},eb=e=>{ep(em.filter(s=>s.id!==e))},eN=(e,s)=>{let t=eo.findIndex(s=>s.id===e);if(-1===t)return;let a="up"===s?t-1:t+1;if(a<0||a>=eo.length)return;let r=[...eo],[i]=r.splice(t,1);r.splice(a,0,i),ex(r)},ew=(e,s)=>{let t=em.findIndex(s=>s.id===e);if(-1===t)return;let a="up"===s?t-1:t+1;if(a<0||a>=em.length)return;let r=[...em],[i]=r.splice(t,1);r.splice(a,0,i),ep(r)},eC=(e,s)=>{ex(eo.map(t=>t.id===e?{...t,name:s}:t))},ek=(e,s)=>{ep(em.map(t=>t.id===e?{...t,name:s}:t))},eT=(e,s)=>{ex(eo.map(t=>t.id===e?{...t,objective:s}:t))},eA=(e,s)=>{ep(em.map(t=>t.id===e?{...t,objective:s}:t))},eR=(e,s,t)=>{ex(eo.map(a=>a.id===e?{...a,schedule:{...a.schedule,[s]:t}}:a))},eS=(e,s,t)=>{ep(em.map(a=>a.id===e?{...a,schedule:{...a.schedule,[s]:t}}:a))},eD=e=>{let s={id:Date.now().toString(),name:"Basic Section",type:"basic",restAfter:"02:00",exercises:[]};ex(eo.map(t=>t.id===e?{...t,sections:[...t.sections,s]}:t))},eE=e=>{let s={id:Date.now().toString(),name:"Basic Section",type:"basic",restAfter:"02:00",exercises:[]};ep(em.map(t=>t.id===e?{...t,sections:[...t.sections,s]}:t))},e$=(e,s)=>{ex(eo.map(t=>t.id===e?{...t,sections:t.sections.filter(e=>e.id!==s)}:t))},eW=(e,s)=>{ep(em.map(t=>t.id===e?{...t,sections:t.sections.filter(e=>e.id!==s)}:t))},eV=(e,s,t)=>{ex(eo.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,name:t}:e)}:a))},eI=(e,s,t)=>{ep(em.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,name:t}:e)}:a))},eP=(e,s,t)=>{ex(eo.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,type:t,emomDuration:"emom"===t?10:e.emomDuration,exercises:"tabata"===t||"emom"===t?[]:e.exercises}:e)}:a))},eB=(e,s,t)=>{ep(em.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,type:t,emomDuration:"emom"===t?10:e.emomDuration,exercises:"tabata"===t||"emom"===t?[]:e.exercises}:e)}:a))},eF=(e,s,t)=>{ex(eo.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,restAfter:t}:e)}:a))},eJ=(e,s,t)=>{ep(em.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,restAfter:t}:e)}:a))},eL=(e,s,t)=>{ex(eo.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,emomDuration:t}:e)}:a))},eq=(e,s,t)=>{ep(em.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,emomDuration:t}:e)}:a))},e_=(e,s,t,a)=>{ex(eo.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,emomReps:a}:e)}:e)}:r))},eO=(e,s,t,a)=>{ep(em.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,emomReps:a}:e)}:e)}:r))},eG=e=>{let s=[],t=1;switch(e){case"linear":for(let e=0;e<3;e++)s.push({id:"".concat(Date.now(),"_").concat(e,"_linear"),setNumber:t++,setType:"normal",repType:"fixed",reps:5,weight:null,rpe:null,notes:""});break;case"dual":for(let e=0;e<3;e++)s.push({id:"".concat(Date.now(),"_").concat(e,"_dual"),setNumber:t++,setType:"normal",repType:"range",reps:null,repsMin:8,repsMax:12,weight:null,rpe:null,notes:""});break;case"inverse-pyramid":[{reps:6,note:"Start with heaviest weight"},{reps:8,note:"~90% of first set"},{reps:10,note:"~80% of first set"},{reps:12,note:"~70% of first set"}].forEach((e,a)=>{s.push({id:"".concat(Date.now(),"_").concat(a,"_pyramid"),setNumber:t++,setType:"normal",repType:"fixed",reps:e.reps,weight:null,rpe:null,notes:e.note})});break;case"myo-reps":s.push({id:"".concat(Date.now(),"_activation"),setNumber:t++,setType:"normal",repType:"fixed",reps:12,weight:null,rpe:null,notes:"Activation set - 2-3 reps in reserve"});for(let e=0;e<4;e++)s.push({id:"".concat(Date.now(),"_mini_").concat(e),setNumber:t++,setType:"failure",repType:"fixed",reps:3,weight:null,rpe:null,notes:"Mini-set ".concat(e+1," - to failure")});break;case"widowmaker":s.push({id:"".concat(Date.now(),"_widowmaker"),setNumber:1,setType:"failure",repType:"fixed",reps:20,weight:null,rpe:null,notes:"Single high-rep set to failure"});break;case"amrap":for(let e=0;e<2;e++)s.push({id:"".concat(Date.now(),"_regular_").concat(e),setNumber:t++,setType:"normal",repType:"fixed",reps:8,weight:null,rpe:null,notes:""});s.push({id:"".concat(Date.now(),"_amrap"),setNumber:t,setType:"failure",repType:"fixed",reps:null,weight:null,rpe:null,notes:"AMRAP - As many reps as possible"});break;default:s.push({id:"".concat(Date.now(),"_default"),setNumber:1,setType:"normal",repType:"fixed",reps:5,weight:null,rpe:null,notes:""})}return s},eZ=(e,s,t,a,r)=>{let i=eo.find(e=>e.id===s),n=em.find(e=>e.id===s),l=i||n;if(!l)return;let c=l.sections.find(e=>e.id===t),d=null==c?void 0:c.exercises.find(e=>e.id===a),o="";if("exercise"===e)o=(null==d?void 0:d.notes)||"";else if("set"===e&&r){let e=null==d?void 0:d.sets.find(e=>e.id===r);o=(null==e?void 0:e.notes)||""}ea({type:e,workoutId:s,sectionId:t,exerciseId:a,setId:r,currentNotes:o}),Y(!0)},eU=(e,s,t,a)=>{ex(eo.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,sets:a}:e)}:e)}:r))},eH=(e,s,t,a)=>{ep(em.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,sets:a}:e)}:e)}:r))},eK=(e,s,t,a)=>{ex(eo.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,name:a}:e)}:e)}:r))},eY=(e,s,t,a)=>{ep(em.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,name:a}:e)}:e)}:r))},eQ=(e,s,t,a)=>{ex(eo.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,restTimer:a}:e)}:e)}:r))},eX=(e,s,t,a)=>{ep(em.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,restTimer:a}:e)}:e)}:r))},e0=(e,s,t,a)=>{ex(eo.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,restAfter:a}:e)}:e)}:r))},e2=(e,s,t,a)=>{ep(em.map(r=>r.id===e?{...r,sections:r.sections.map(e=>e.id===s?{...e,exercises:e.exercises.map(e=>e.id===t?{...e,restAfter:a}:e)}:e)}:r))},e1=e=>{el(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},e4=e=>{ed(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},e6=(e,s,t)=>{ex(eo.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,exercises:e.exercises.filter(e=>e.id!==t)}:e)}:a))},e5=(e,s,t)=>{ep(em.map(a=>a.id===e?{...a,sections:a.sections.map(e=>e.id===s?{...e,exercises:e.exercises.filter(e=>e.id!==t)}:e)}:a))},e3=$.trim()&&(eo.length>0||em.length>0),e8=(e,s,t,b,N,w,C,T,S,$,W,F,J,L,q,_,O,G,Z,U,K,Y,Q)=>(0,a.jsxs)(M.Zp,{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)(V,{children:(0,a.jsxs)(I,{children:[(0,a.jsx)(P,{asChild:!0,children:(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>w(e.id,"up"),disabled:0===s,className:"p-1 h-6 w-6",children:(0,a.jsx)(c.A,{className:"h-3 w-3"})})}),(0,a.jsx)(B,{children:"Move up"})]})}),(0,a.jsx)(V,{children:(0,a.jsxs)(I,{children:[(0,a.jsx)(P,{asChild:!0,children:(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>w(e.id,"down"),disabled:s===Q-1,className:"p-1 h-6 w-6",children:(0,a.jsx)(d.A,{className:"h-3 w-3"})})}),(0,a.jsx)(B,{children:"Move down"})]})})]}),(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-200 text-gray-700 text-sm font-medium",children:s+1}),(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>N(e.id),className:"p-1",children:b.has(e.id)?(0,a.jsx)(o.A,{className:"h-4 w-4"}):(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:["strength"===e.type&&(0,a.jsx)(i.A,{className:"h-5 w-5 text-indigo-600"}),"running"===e.type&&(0,a.jsx)(m.A,{className:"h-5 w-5 text-green-600"}),"trail-running"===e.type&&(0,a.jsx)(u.A,{className:"h-5 w-5 text-orange-600"}),"swimming"===e.type&&(0,a.jsx)(p.A,{className:"h-5 w-5 text-blue-600"}),"cycling"===e.type&&(0,a.jsx)(h.A,{className:"h-5 w-5 text-purple-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(E.p,{value:e.name,onChange:s=>T(e.id,s.target.value),className:"font-medium border-none p-0 h-auto bg-transparent focus:bg-white focus:border-gray-300"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:(e=>{if("running"===e.type&&"trailRunningData"in e&&e.trailRunningData){let s=e.trailRunningData.estimatedDuration;if(s<60)return"".concat(s," min");let t=Math.floor(s/60),a=s%60;return a>0?"".concat(t,"h ").concat(a,"min"):"".concat(t,"h")}if("strength"!==e.type)return({running:"45 min",swimming:"45 min",cycling:"60 min","trail-running":"45 min"})[e.type]||"45 min";let s=0;e.sections.forEach((t,a)=>{if("emom"===t.type&&t.emomDuration?s+=t.emomDuration:"tabata"===t.type?s+=4:t.exercises.forEach((e,a)=>{if(e.sets.forEach(()=>{s+=.75}),e.sets.length>1){let[t,a]=e.restTimer.split(":").map(Number);s+=(t+a/60)*(e.sets.length-1)}if(a<t.exercises.length-1){let[t,a]=e.restAfter.split(":").map(Number);s+=t+a/60}}),a<e.sections.length-1){let[e,a]=t.restAfter.split(":").map(Number);s+=e+a/60}});let t=5*Math.round(s/5);if(0===t)return"—";if(t<60)return"".concat(t," min");let a=Math.floor(t/60),r=t%60;return r>0?"".concat(a,"h ").concat(r,"min"):"".concat(a,"h")})(e)}),(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"•"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:e.type.replace("-"," ")})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["running"===e.type&&(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{let s=em.find(s=>s.id===e);(null==s?void 0:s.trailRunningData)&&es({workoutId:e,data:s.trailRunningData})})(e.id),className:"text-green-600 hover:text-green-700",children:"Edit"}),(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>C(e.id),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]})]})}),!b.has(e.id)&&(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{children:"Objective"}),(0,a.jsx)(R.T,{value:e.objective,onChange:s=>S(e.id,s.target.value),placeholder:"What is the primary goal of this workout?",rows:2})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{children:"Weeks"}),(0,a.jsx)(E.p,{value:e.schedule.weeks,onChange:s=>$(e.id,"weeks",s.target.value),placeholder:"e.g., Week 1, 3, 5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{children:"Day"}),(0,a.jsxs)(z.l6,{value:e.schedule.day,onValueChange:s=>$(e.id,"day",s),children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:"Monday",children:"Monday"}),(0,a.jsx)(z.eb,{value:"Tuesday",children:"Tuesday"}),(0,a.jsx)(z.eb,{value:"Wednesday",children:"Wednesday"}),(0,a.jsx)(z.eb,{value:"Thursday",children:"Thursday"}),(0,a.jsx)(z.eb,{value:"Friday",children:"Friday"}),(0,a.jsx)(z.eb,{value:"Saturday",children:"Saturday"}),(0,a.jsx)(z.eb,{value:"Sunday",children:"Sunday"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{children:"Time"}),(0,a.jsx)(E.p,{value:e.schedule.time,onChange:s=>$(e.id,"time",s.target.value),placeholder:"e.g., 9:00 AM"})]})]}),"running"===e.type&&"trailRunningData"in e&&e.trailRunningData&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900",children:"Running Configuration"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-green-700",children:[(0,a.jsxs)("span",{children:[e.trailRunningData.targetDistance,"km"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[e.trailRunningData.estimatedDuration,"min"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["+",e.trailRunningData.elevationGain,"m"]})]})]}),(0,a.jsxs)("p",{className:"text-sm text-green-700",children:[e.trailRunningData.sections.length," training sections configured"]})]}),"running"!==e.type&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Sections"}),(0,a.jsxs)(k.$,{size:"sm",onClick:()=>W(e.id),className:"text-sm",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-1"}),"Add Section"]})]}),e.sections.map((s,c)=>{var d;let o=(e=>{let s={warmup:{bg:"bg-orange-50/50",border:"border-orange-200",headerBg:"bg-orange-100",headerText:"text-orange-800",headerBorder:"border-orange-200",icon:"text-orange-600"},basic:{bg:"bg-indigo-50/50",border:"border-indigo-200",headerBg:"bg-indigo-100",headerText:"text-indigo-800",headerBorder:"border-indigo-200",icon:"text-indigo-600"},cooldown:{bg:"bg-blue-50/50",border:"border-blue-200",headerBg:"bg-blue-100",headerText:"text-blue-800",headerBorder:"border-blue-200",icon:"text-blue-600"},emom:{bg:"bg-purple-50/50",border:"border-purple-200",headerBg:"bg-purple-100",headerText:"text-purple-800",headerBorder:"border-purple-200",icon:"text-purple-600"},tabata:{bg:"bg-red-50/50",border:"border-red-200",headerBg:"bg-red-100",headerText:"text-red-800",headerBorder:"border-red-200",icon:"text-red-600"}};return s[e]||s.basic})(s.type),x=(d=s.type,({warmup:r.A,basic:i.A,cooldown:r.A,emom:n.A,tabata:l.A})[d]||i.A);return(0,a.jsxs)("div",{className:"border rounded-lg ".concat(o.border," ").concat(o.bg),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b ".concat(o.headerBorder," ").concat(o.headerBg),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(x,{className:"h-4 w-4 ".concat(o.icon)}),(0,a.jsx)(E.p,{value:s.name,onChange:t=>J(e.id,s.id,t.target.value),className:"border-none p-0 h-auto bg-transparent font-medium"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(z.l6,{value:s.type,onValueChange:t=>L(e.id,s.id,t),children:[(0,a.jsx)(z.bq,{className:"w-32 text-sm",children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:"warmup",children:"Warm-up"}),(0,a.jsx)(z.eb,{value:"basic",children:"Basic"}),(0,a.jsx)(z.eb,{value:"cooldown",children:"Cool-down"}),(0,a.jsx)(z.eb,{value:"emom",children:"EMOM"}),(0,a.jsx)(z.eb,{value:"tabata",children:"TABATA"})]})]}),(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>F(e.id,s.id),className:"text-red-600 hover:text-red-700 p-1",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"p-3 space-y-3",children:["emom"===s.type&&(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(A.J,{className:"text-sm font-medium",children:"Duration (minutes):"}),(0,a.jsx)(E.p,{type:"number",value:s.emomDuration||10,onChange:t=>_(e.id,s.id,parseInt(t.target.value)||10),className:"w-20",min:"1",max:"60"})]}),"tabata"===s.type&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-200 rounded p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-800",children:"TABATA Protocol: 4 minutes total (8 rounds of 20 seconds work, 10 seconds rest)"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(A.J,{className:"text-sm font-medium",children:"Exercises"}),(0,a.jsxs)(k.$,{size:"sm",variant:"outline",onClick:()=>{ei({workoutId:e.id,sectionId:s.id}),H(!0)},className:"text-sm",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-1"}),"Add Exercise"]})]}),0===s.exercises.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No exercises added yet"}):s.exercises.map((r,i)=>{var n,l,c,d;return(0,a.jsxs)("div",{className:"bg-white rounded border p-3 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,a.jsx)(E.p,{value:r.name,onChange:t=>Z(e.id,s.id,r.id,t.target.value),className:"font-medium border-none p-0 h-auto bg-transparent flex-1"}),t&&r.progressionMethod&&(0,a.jsx)(V,{children:(0,a.jsxs)(I,{children:[(0,a.jsx)(P,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsxs)(D.E,{variant:"outline",className:"text-xs ".concat({linear:"bg-green-100 text-green-800 border-green-200",dual:"bg-blue-100 text-blue-800 border-blue-200","inverse-pyramid":"bg-purple-100 text-purple-800 border-purple-200","myo-reps":"bg-orange-100 text-orange-800 border-orange-200",widowmaker:"bg-red-100 text-red-800 border-red-200",amrap:"bg-yellow-100 text-yellow-800 border-yellow-200"}[r.progressionMethod]||"bg-gray-100 text-gray-800 border-gray-200"),children:[(0,a.jsx)(y.A,{className:"h-3 w-3 mr-1"}),(c=r.progressionMethod,(null==(d=eh.find(e=>e.value===c))?void 0:d.label)||c)]})})}),(0,a.jsx)(B,{children:null==(n=eh.find(e=>e.value===r.progressionMethod))?void 0:n.description})]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(V,{children:(0,a.jsxs)(I,{children:[(0,a.jsx)(P,{asChild:!0,children:(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>eZ("exercise",e.id,s.id,r.id),className:r.notes?"text-blue-600":"text-gray-400",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})}),(0,a.jsx)(B,{children:r.notes?"Edit notes":"Add notes"})]})}),(0,a.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>Y(e.id,s.id,r.id),className:"text-red-600 hover:text-red-700 p-1",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]})]}),t&&"tabata"!==s.type&&"emom"!==s.type&&(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"text-sm",children:"Progression Method"}),(0,a.jsxs)(z.l6,{value:r.progressionMethod||"linear",onValueChange:t=>{var a,i,n;return a=e.id,i=s.id,n=r.id,void ex(eo.map(e=>e.id===a?{...e,sections:e.sections.map(e=>e.id===i?{...e,exercises:e.exercises.map(e=>e.id===n?{...e,progressionMethod:t,sets:eG(t)}:e)}:e)}:e))},children:[(0,a.jsx)(z.bq,{className:"text-sm",children:(0,a.jsx)(z.yv,{})}),(0,a.jsx)(z.gC,{children:eh.map(e=>(0,a.jsx)(z.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.description})]})},e.value))})]})]}),"emom"===s.type&&(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(A.J,{className:"text-sm",children:"Target reps per minute:"}),(0,a.jsx)(E.p,{type:"number",value:r.emomReps||10,onChange:t=>O(e.id,s.id,r.id,parseInt(t.target.value)||10),className:"w-20",min:"1",max:"50"})]}),"tabata"!==s.type&&"emom"!==s.type&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(ez,{sets:r.sets,onSetsChange:t=>G(e.id,s.id,r.id,t),onNotesClick:t=>eZ("set",e.id,s.id,r.id,t),progressionMethod:t?r.progressionMethod:void 0}),t&&r.sets.length>0&&!r.hasApproachSets&&(null==(l=r.sets[0])?void 0:l.weight)&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(k.$,{variant:"outline",size:"sm",onClick:()=>{var t,a,i;return t=e.id,a=s.id,i=r.id,void ex(eo.map(e=>e.id===t?{...e,sections:e.sections.map(e=>e.id===a?{...e,exercises:e.exercises.map(e=>{if(e.id===i){let s=e.sets.filter(e=>"normal"===e.setType),t=s.length>0?s[0]:null,a=[];if(t){let e=t.weight||60,s=t.reps||t.repsMin||8;for(let t=1;t<=3;t++){let r=Math.round(e*(.4+.15*t));a.push({id:"approach-".concat(Date.now(),"-").concat(t),setNumber:t,setType:"warmup",repType:"fixed",reps:Math.max(3,Math.round(.6*s)),weight:r,rpe:Math.min(6,t+3),notes:""})}}let r=[...a,...e.sets].map((e,s)=>({...e,setNumber:s+1}));return{...e,sets:r,hasApproachSets:!0}}return e})}:e)}:e))},className:"text-sm text-gray-600 hover:text-gray-800",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-1"}),"Add Approach Sets"]})})]}),"tabata"!==s.type&&(0,a.jsx)("div",{className:"space-y-3",children:"emom"===s.type?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded p-3",children:(0,a.jsxs)("p",{className:"text-sm text-purple-800",children:[(0,a.jsx)("strong",{children:"EMOM Rest:"})," Rest is automatic - the remaining time after completing your reps becomes your rest period before the next minute starts."]})}),i<s.exercises.length-1&&(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"text-sm",children:"Rest after exercise"}),(0,a.jsx)(E.p,{value:r.restAfter,onChange:t=>K(e.id,s.id,r.id,t.target.value),placeholder:"02:30",className:"text-sm"})]})]}):(0,a.jsxs)("div",{className:"grid gap-4 ".concat(i<s.exercises.length-1?"grid-cols-2":"grid-cols-1"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"text-sm",children:"Rest between sets"}),(0,a.jsx)(E.p,{value:r.restTimer,onChange:t=>U(e.id,s.id,r.id,t.target.value),placeholder:"02:00",className:"text-sm"})]}),i<s.exercises.length-1&&(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"text-sm",children:"Rest after exercise"}),(0,a.jsx)(E.p,{value:r.restAfter,onChange:t=>K(e.id,s.id,r.id,t.target.value),placeholder:"02:30",className:"text-sm"})]})]})})]},r.id)})]}),c<e.sections.length-1&&(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{className:"text-sm",children:"Rest after section"}),(0,a.jsx)(E.p,{value:s.restAfter,onChange:t=>q(e.id,s.id,t.target.value),placeholder:"03:00",className:"text-sm w-32"})]})]})]},s.id)})]})]})]},e.id);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(k.$,{variant:"ghost",size:"sm",onClick:()=>T.push("/routines"),className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Back to Routines"})]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"create"===t?"Create Routine":"Edit Routine"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(k.$,{variant:"outline",onClick:()=>T.push("/routines"),children:"Cancel"}),(0,a.jsxs)(k.$,{onClick:()=>T.push("/routines"),disabled:!e3,className:"flex items-center space-x-2",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"create"===t?"Create Routine":"Save Changes"})]})]})]})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,a.jsx)(M.Zp,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"name",children:"Routine Name"}),(0,a.jsx)(E.p,{id:"name",value:$,onChange:e=>W(e.target.value),placeholder:"e.g., Full Body Split"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"duration",children:"Duration (weeks)"}),(0,a.jsxs)(z.l6,{value:F,onValueChange:J,children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:"4",children:"4 weeks"}),(0,a.jsx)(z.eb,{value:"6",children:"6 weeks"}),(0,a.jsx)(z.eb,{value:"8",children:"8 weeks"}),(0,a.jsx)(z.eb,{value:"12",children:"12 weeks"}),(0,a.jsx)(z.eb,{value:"16",children:"16 weeks"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"difficulty",children:"Difficulty"}),(0,a.jsxs)(z.l6,{value:L,onValueChange:q,children:[(0,a.jsx)(z.bq,{children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:"Beginner",children:"Beginner"}),(0,a.jsx)(z.eb,{value:"Intermediate",children:"Intermediate"}),(0,a.jsx)(z.eb,{value:"Advanced",children:"Advanced"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(R.T,{id:"description",value:_,onChange:e=>O(e.target.value),placeholder:"Describe your routine...",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.J,{htmlFor:"objectives",children:"Training Objectives"}),(0,a.jsx)(R.T,{id:"objectives",value:G,onChange:e=>Z(e.target.value),placeholder:"What are the main goals and focus areas of this routine?",rows:3})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Strength Workouts (",eo.length,")"]}),(0,a.jsxs)(k.$,{onClick:eg,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Add Strength Workout"]})]}),eo.map((e,s)=>e8(e,s,!0,en,e1,eN,ef,eC,eT,eR,eD,e$,eV,eP,eF,eL,e_,eU,eK,eQ,e0,e6,eo.length)),0===eo.length&&(0,a.jsx)(M.Zp,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)(i.A,{className:"h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No strength workouts added yet"}),(0,a.jsxs)(k.$,{onClick:eg,className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Add Your First Strength Workout"]})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Running Workouts (",em.length+ +!!Q,")"]}),(0,a.jsxs)(k.$,{onClick:ev,className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add Running Workout"]})]}),Q&&(0,a.jsx)(M.Zp,{className:"border-2 border-green-200",children:(0,a.jsx)(eM,{onSave:ej,onCancel:ey,mode:"create"})}),ee&&(0,a.jsx)(M.Zp,{className:"border-2 border-green-200",children:(0,a.jsx)(eM,{onSave:ej,onCancel:ey,initialData:ee.data,mode:"edit"})}),em.map((e,s)=>e8(e,s,!1,ec,e4,ew,eb,ek,eA,eS,eE,eW,eI,eB,eJ,eq,eO,eH,eY,eX,e2,e5,em.length)),0===em.length&&!Q&&(0,a.jsx)(M.Zp,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No running workouts added yet"}),(0,a.jsxs)(k.$,{onClick:ev,className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add Your First Running Workout"]})]})]})})]})]}),(0,a.jsx)(eu,{isOpen:U,onClose:()=>{H(!1),ei(null)},onSelectExercise:e=>{if(!er)return;let s=eo.find(e=>e.id===er.workoutId),t=em.find(e=>e.id===er.workoutId),a=s||t;if(!a)return;let r=a.sections.find(e=>e.id===er.sectionId),i={id:Date.now().toString(),name:e.name,category:e.category,muscleGroups:e.muscleGroups,sets:(null==r?void 0:r.type)==="tabata"?[]:s?eG("linear"):[],restTimer:(null==r?void 0:r.type)==="emom"?"00:00":"01:30",restAfter:(null==r?void 0:r.type)==="tabata"?"00:00":"02:00",notes:"",progressionMethod:s?"linear":void 0,emomReps:(null==r?void 0:r.type)==="emom"?10:void 0};s?ex(eo.map(e=>e.id===er.workoutId?{...e,sections:e.sections.map(e=>e.id===er.sectionId?{...e,exercises:[...e.exercises,i]}:e)}:e)):t&&ep(em.map(e=>e.id===er.workoutId?{...e,sections:e.sections.map(e=>e.id===er.sectionId?{...e,exercises:[...e.exercises,i]}:e)}:e)),ei(null),H(!1)}}),(0,a.jsx)(S,{isOpen:K,onClose:()=>{Y(!1),ea(null)},onSave:e=>{if(!et)return;let{type:s,workoutId:t,sectionId:a,exerciseId:r,setId:i}=et;ex(eo.map(n=>n.id===t?{...n,sections:n.sections.map(t=>t.id===a?{...t,exercises:t.exercises.map(t=>t.id===r?"exercise"===s?{...t,notes:e}:{...t,sets:t.sets.map(s=>s.id===i?{...s,notes:e}:s)}:t)}:t)}:n)),ep(em.map(n=>n.id===t?{...n,sections:n.sections.map(t=>t.id===a?{...t,exercises:t.exercises.map(t=>t.id===r?"exercise"===s?{...t,notes:e}:{...t,sets:t.sets.map(s=>s.id===i?{...s,notes:e}:s)}:t)}:t)}:n)),ea(null)},initialNotes:(null==et?void 0:et.currentNotes)||""})]})}let eW=()=>(0,a.jsx)(e$,{})},73809:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(20906);t(33826);var r=t(66208);let i=e=>{let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}},84715:(e,s,t)=>{"use strict";t.d(s,{bq:()=>x,eb:()=>u,gC:()=>m,l6:()=>d,yv:()=>o});var a=t(20906),r=t(24024),i=t(56942),n=t(29800),l=t(21491);t(33826);var c=t(66208);let d=e=>{let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"select",...s})},o=e=>{let{...s}=e;return(0,a.jsx)(r.WT,{"data-slot":"select-value",...s})},x=e=>{let{className:s,size:t="default",children:n,...l}=e;return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...l,children:[n,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"size-4 opacity-50"})})]})},m=e=>{let{className:s,children:t,position:i="popper",...n}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,a.jsx)(p,{}),(0,a.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(h,{})]})})},u=e=>{let{className:s,children:t,...i}=e;return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...i,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(n.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:t})]})},p=e=>{let{className:s,...t}=e;return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(l.A,{className:"size-4"})})},h=e=>{let{className:s,...t}=e;return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(i.A,{className:"size-4"})})}}},e=>{e.O(0,[4301,9005,1670,5468,9747,9988,3562,7777,4779,3334,7524,8202,7358],()=>e(e.s=32788)),_N_E=e.O()}]);