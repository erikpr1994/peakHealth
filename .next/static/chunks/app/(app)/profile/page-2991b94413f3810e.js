(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{190:e=>{e.exports={container:"Profile_container__BcBFx",header:"Profile_header__aCwI0",title:"Profile_title__u6DDj",errorMessage:"Profile_errorMessage__TTZyx",content:"Profile_content__Gh1pY",mainContent:"Profile_mainContent__QypwY",sidebar:"Profile_sidebar__Qvw4I",loadingState:"Profile_loadingState__O9BA1",errorState:"Profile_errorState__KFTvo"}},4211:(e,a,t)=>{"use strict";t.d(a,{$:()=>d,r:()=>o});var r=t(20906),s=t(90882),i=t(57742),n=t(33826),l=t(66208);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,a)=>{let{className:t,variant:i,size:n,asChild:d=!1,...c}=e,u=d?s.DX:"button";return(0,r.jsx)(u,{"data-slot":"button",className:(0,l.cn)(o({variant:i,size:n,className:t})),ref:a,...c})});d.displayName="Button"},17881:e=>{e.exports={header:"FitnessProfileCard_header__BusbZ",content:"FitnessProfileCard_content__5KiNi",grid:"FitnessProfileCard_grid__ECeNk",label:"FitnessProfileCard_label__n56iw",labelText:"FitnessProfileCard_labelText__0MOO6",icon:"FitnessProfileCard_icon___Orfj",badge:"FitnessProfileCard_badge__DNJT8",badgeContainer:"FitnessProfileCard_badgeContainer__w1UR_",separator:"FitnessProfileCard_separator__CdtwH",textBox:"FitnessProfileCard_textBox__tKrhh",completedAt:"FitnessProfileCard_completedAt__j3XOn",emptyState:"FitnessProfileCard_emptyState__5bgqo",retakeButton:"FitnessProfileCard_retakeButton__DiHIQ",buttonIcon:"FitnessProfileCard_buttonIcon__vkFPc"}},42663:e=>{e.exports={content:"AchievementsCard_content__mYtk_",achievementItem:"AchievementsCard_achievementItem__MjNVr",achievementIcon:"AchievementsCard_achievementIcon__oLRDg",iconText:"AchievementsCard_iconText__XYcNk",achievementInfo:"AchievementsCard_achievementInfo__jdg1c",achievementTitle:"AchievementsCard_achievementTitle__7R9os",achievementDate:"AchievementsCard_achievementDate__mbwNS",emptyState:"AchievementsCard_emptyState__wCtE9",yellow:"AchievementsCard_yellow__wRBOw",orange:"AchievementsCard_orange__oXQZ8",blue:"AchievementsCard_blue__HviKE",green:"AchievementsCard_green___1yVr",default:"AchievementsCard_default__Tx_Oz"}},46543:(e,a,t)=>{Promise.resolve().then(t.bind(t,75142))},58620:(e,a,t)=>{"use strict";t.d(a,{E:()=>o});var r=t(20906),s=t(90882),i=t(57742);t(33826);var n=t(66208);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),o=e=>{let{className:a,variant:t,asChild:i=!1,...o}=e,d=i?s.DX:"span";return(0,r.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(l({variant:t}),a),...o})}},66208:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var r=t(63756),s=t(77564);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},68708:(e,a,t)=>{"use strict";t.d(a,{BK:()=>l,eu:()=>n,q5:()=>o});var r=t(20906),s=t(38769);t(33826);var i=t(66208);let n=e=>{let{className:a,...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"avatar",className:(0,i.cn)("relative flex size-10 shrink-0 overflow-hidden rounded-full",a),...t})},l=e=>{let{className:a,...t}=e;return(0,r.jsx)(s._V,{"data-slot":"avatar-image",className:(0,i.cn)("aspect-square size-full",a),...t})},o=e=>{let{className:a,...t}=e;return(0,r.jsx)(s.H4,{"data-slot":"avatar-fallback",className:(0,i.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...t})}},70097:(e,a,t)=>{"use strict";t.d(a,{BT:()=>o,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>n});var r=t(20906);t(33826);var s=t(66208);let i=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...t})},n=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})},l=e=>{let{className:a,...t}=e;return(0,r.jsx)("h4",{"data-slot":"card-title",className:(0,s.cn)("leading-none",a),...t})},o=e=>{let{className:a,...t}=e;return(0,r.jsx)("p",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground",a),...t})},d=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6 [&:last-child]:pb-6",a),...t})}},73809:(e,a,t)=>{"use strict";t.d(a,{T:()=>i});var r=t(20906);t(33826);var s=t(66208);let i=e=>{let{className:a,...t}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...t})}},74463:e=>{e.exports={content:"PersonalInfoCard_content__z1nZe",avatarSection:"PersonalInfoCard_avatarSection__7U4lC",avatar:"PersonalInfoCard_avatar__fxBkQ",avatarFallback:"PersonalInfoCard_avatarFallback__HS5sW",nameSection:"PersonalInfoCard_nameSection__ckq5M",displayName:"PersonalInfoCard_displayName__Ic0u8",memberSince:"PersonalInfoCard_memberSince__HmwES",editNameFields:"PersonalInfoCard_editNameFields__WRcIt",formGrid:"PersonalInfoCard_formGrid__cyfBQ",label:"PersonalInfoCard_label__tzdOC",icon:"PersonalInfoCard_icon__2QiLJ",value:"PersonalInfoCard_value__MF9vz",bioTextarea:"PersonalInfoCard_bioTextarea__9P4vP",actions:"PersonalInfoCard_actions__wlJJk",editButton:"PersonalInfoCard_editButton__EtUvX",saveButton:"PersonalInfoCard_saveButton__A2_jI",buttonIcon:"PersonalInfoCard_buttonIcon__UUY_H"}},75142:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>H});var r=t(20906),s=t(33826),i=t(190),n=t.n(i),l=t(33519),o=t(75560),d=t(48192),c=t(58558),u=t(129),h=t(34611),m=t(74463),v=t.n(m),_=t(68708),x=t(4211),p=t(70097),b=t(92661),f=t(86067),g=t(73809);let j=e=>{let{user:a,onUpdateMetadata:t,isUpdating:i=!1}=e,[n,m]=(0,s.useState)(!1),[j,N]=(0,s.useState)({name:a.user_metadata.name||"",display_name:a.user_metadata.display_name||"",phone:a.user_metadata.phone||"",location:a.user_metadata.location||"",birth_date:a.user_metadata.birth_date||"",bio:a.user_metadata.bio||""}),y=async()=>{await t({name:j.name,display_name:j.display_name,phone:j.phone,location:j.location,birth_date:j.birth_date,bio:j.bio})&&m(!1)},C=j.display_name||j.name||(a.email?a.email.split("@")[0]:"User");return(0,r.jsxs)(p.Zp,{children:[(0,r.jsx)(p.aR,{children:(0,r.jsx)(p.ZB,{children:"Personal Information"})}),(0,r.jsxs)(p.Wu,{className:v().content,children:[(0,r.jsxs)("div",{className:v().avatarSection,children:[(0,r.jsxs)(_.eu,{className:v().avatar,children:[(0,r.jsx)(_.BK,{src:a.user_metadata.avatar_url||"/api/placeholder/80/80",alt:C}),(0,r.jsx)(_.q5,{className:v().avatarFallback,children:C.split(" ").map(e=>e[0]).join("")})]}),(0,r.jsx)("div",{className:v().nameSection,children:n?(0,r.jsxs)("div",{className:v().editNameFields,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(f.J,{htmlFor:"name",children:"Full Name"}),(0,r.jsx)(b.p,{id:"name",value:j.name,onChange:e=>N({...j,name:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.J,{htmlFor:"display_name",children:"Display Name"}),(0,r.jsx)(b.p,{id:"display_name",value:j.display_name,onChange:e=>N({...j,display_name:e.target.value})})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:v().displayName,children:C}),(0,r.jsxs)("p",{className:v().memberSince,children:["Peak Health Member since"," ",a.created_at?new Date(a.created_at).getFullYear():"2024"]})]})})]}),(0,r.jsxs)("div",{className:v().formGrid,children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(f.J,{htmlFor:"email",className:v().label,children:[(0,r.jsx)(l.A,{className:v().icon}),"Email"]}),(0,r.jsx)("p",{className:v().value,children:a.email||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(f.J,{htmlFor:"phone",className:v().label,children:[(0,r.jsx)(o.A,{className:v().icon}),"Phone"]}),n?(0,r.jsx)(b.p,{id:"phone",value:j.phone,onChange:e=>N({...j,phone:e.target.value})}):(0,r.jsx)("p",{className:v().value,children:j.phone||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(f.J,{htmlFor:"location",className:v().label,children:[(0,r.jsx)(d.A,{className:v().icon}),"Location"]}),n?(0,r.jsx)(b.p,{id:"location",value:j.location,onChange:e=>N({...j,location:e.target.value})}):(0,r.jsx)("p",{className:v().value,children:j.location||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(f.J,{htmlFor:"birth_date",className:v().label,children:[(0,r.jsx)(c.A,{className:v().icon}),"Birth Date"]}),n?(0,r.jsx)(b.p,{id:"birth_date",type:"date",value:j.birth_date,onChange:e=>N({...j,birth_date:e.target.value})}):(0,r.jsx)("p",{className:v().value,children:j.birth_date?(e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"")(j.birth_date):"Not provided"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(f.J,{htmlFor:"bio",children:"Bio"}),n?(0,r.jsx)(g.T,{id:"bio",value:j.bio,onChange:e=>N({...j,bio:e.target.value}),className:v().bioTextarea,rows:3}):(0,r.jsx)("p",{className:v().value,children:j.bio||"No bio provided"})]}),(0,r.jsx)("div",{className:v().actions,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.$,{onClick:y,disabled:i,className:v().saveButton,children:[(0,r.jsx)(u.A,{className:v().buttonIcon}),i?"Saving...":"Save Changes"]}),(0,r.jsx)(x.$,{variant:"outline",onClick:()=>{N({name:a.user_metadata.name||"",display_name:a.user_metadata.display_name||"",phone:a.user_metadata.phone||"",location:a.user_metadata.location||"",birth_date:a.user_metadata.birth_date||"",bio:a.user_metadata.bio||""}),m(!1)},children:"Cancel"})]}):(0,r.jsxs)(x.$,{onClick:()=>m(!0),className:v().editButton,children:[(0,r.jsx)(h.A,{className:v().buttonIcon}),"Edit Profile"]})})]})]})};var N=t(80317),y=t(50017),C=t(65550),w=t(96673),k=t.n(w);let P=e=>{let{stats:a}=e,t=[{label:"Total Workouts",value:a.total_workouts.toString(),icon:N.A},{label:"Days Active",value:a.days_active.toString(),icon:c.A},{label:"Achievements",value:a.achievements_count.toString(),icon:y.A},{label:"Hours Trained",value:a.hours_trained.toFixed(1),icon:C.A}];return(0,r.jsxs)(p.Zp,{children:[(0,r.jsx)(p.aR,{children:(0,r.jsx)(p.ZB,{children:"Activity Stats"})}),(0,r.jsx)(p.Wu,{className:k().content,children:t.map((e,a)=>{let t=e.icon;return(0,r.jsxs)("div",{className:k().statItem,children:[(0,r.jsxs)("div",{className:k().statInfo,children:[(0,r.jsx)("div",{className:k().statIcon,children:(0,r.jsx)(t,{className:k().icon})}),(0,r.jsx)("span",{className:k().statLabel,children:e.label})]}),(0,r.jsx)("span",{className:k().statValue,children:e.value})]},a)})})]})};var I=t(42663),A=t.n(I);let S=e=>{let{achievements:a}=e;return 0===a.length?(0,r.jsxs)(p.Zp,{children:[(0,r.jsx)(p.aR,{children:(0,r.jsx)(p.ZB,{children:"Recent Achievements"})}),(0,r.jsx)(p.Wu,{children:(0,r.jsx)("p",{className:A().emptyState,children:"No achievements yet. Start working out to earn your first badge!"})})]}):(0,r.jsxs)(p.Zp,{children:[(0,r.jsx)(p.aR,{children:(0,r.jsx)(p.ZB,{children:"Recent Achievements"})}),(0,r.jsx)(p.Wu,{className:A().content,children:a.slice(0,3).map(e=>(0,r.jsxs)("div",{className:A().achievementItem,children:[(0,r.jsx)("div",{className:"".concat(A().achievementIcon," ").concat((e=>{switch(e){case"first_workout":return A().yellow;case"workout_streak_10":return A().orange;case"days_active_30":return A().blue;case"hours_trained_50":return A().green;default:return A().default}})(e.achievement_type)),children:(0,r.jsx)("span",{className:A().iconText,children:e.icon})}),(0,r.jsxs)("div",{className:A().achievementInfo,children:[(0,r.jsx)("p",{className:A().achievementTitle,children:e.title}),(0,r.jsxs)("p",{className:A().achievementDate,children:["Earned ",new Date(e.earned_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]},e.id))})]})};var F=t(94868),T=t(35099),E=t(7389),B=t(1387),R=t(17881),O=t.n(R),D=t(58620),U=t(92848);let z=e=>{var a;let{profile:t}=e,s=()=>{localStorage.removeItem("peak-health-onboarding-complete"),localStorage.removeItem("peak-health-onboarding-data"),window.location.reload()};return t.fitness_level||(null==(a=t.goals)?void 0:a.length)?(0,r.jsxs)(p.Zp,{children:[(0,r.jsxs)(p.aR,{className:O().header,children:[(0,r.jsx)(p.ZB,{children:"Fitness Profile"}),(0,r.jsxs)(x.$,{variant:"outline",size:"sm",onClick:s,className:O().retakeButton,children:[(0,r.jsx)(F.A,{className:O().buttonIcon}),"Retake Quiz"]})]}),(0,r.jsxs)(p.Wu,{className:O().content,children:[(0,r.jsxs)("div",{className:O().grid,children:[t.fitness_level&&(0,r.jsxs)("div",{children:[(0,r.jsxs)(J,{className:O().label,children:[(0,r.jsx)(y.A,{className:O().icon}),"Fitness Level"]}),(0,r.jsx)(D.E,{variant:"secondary",className:O().badge,children:t.fitness_level})]}),t.time_available&&(0,r.jsxs)("div",{children:[(0,r.jsxs)(J,{className:O().label,children:[(0,r.jsx)(C.A,{className:O().icon}),"Time Available"]}),(0,r.jsx)(D.E,{variant:"outline",className:O().badge,children:t.time_available})]}),t.equipment_access&&(0,r.jsxs)("div",{children:[(0,r.jsxs)(J,{className:O().label,children:[(0,r.jsx)(N.A,{className:O().icon}),"Equipment Access"]}),(0,r.jsx)(D.E,{variant:"outline",className:O().badge,children:t.equipment_access})]}),t.experience&&(0,r.jsxs)("div",{children:[(0,r.jsxs)(J,{className:O().label,children:[(0,r.jsx)(T.A,{className:O().icon}),"Experience"]}),(0,r.jsx)(D.E,{variant:"outline",className:O().badge,children:t.experience})]})]}),(0,r.jsx)(U.w,{className:O().separator}),t.goals&&t.goals.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)(J,{className:O().label,children:[(0,r.jsx)(E.A,{className:O().icon}),"Fitness Goals"]}),(0,r.jsx)("div",{className:O().badgeContainer,children:t.goals.map((e,a)=>(0,r.jsx)(D.E,{className:O().badge,children:e},a))})]}),t.workout_types&&t.workout_types.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)(J,{className:O().label,children:[(0,r.jsx)(B.A,{className:O().icon}),"Preferred Workout Types"]}),(0,r.jsx)("div",{className:O().badgeContainer,children:t.workout_types.map((e,a)=>(0,r.jsx)(D.E,{variant:"secondary",className:O().badge,children:e},a))})]}),t.limitations&&(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{className:O().label,children:"Physical Considerations"}),(0,r.jsx)("p",{className:O().textBox,children:t.limitations})]}),t.motivation&&(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{className:O().label,children:"Motivation"}),(0,r.jsx)("p",{className:O().textBox,children:t.motivation})]}),t.onboarding_completed_at&&(0,r.jsxs)("div",{className:O().completedAt,children:["Profile created: ",new Date(t.onboarding_completed_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}):(0,r.jsxs)(p.Zp,{children:[(0,r.jsx)(p.aR,{children:(0,r.jsx)(p.ZB,{children:"Fitness Profile"})}),(0,r.jsxs)(p.Wu,{children:[(0,r.jsx)("p",{className:O().emptyState,children:"No fitness profile data available. Complete the onboarding to get personalized recommendations."}),(0,r.jsxs)(x.$,{variant:"outline",size:"sm",onClick:s,className:O().retakeButton,children:[(0,r.jsx)(F.A,{className:O().buttonIcon}),"Take Onboarding Quiz"]})]})]})},J=e=>{let{children:a,className:t}=e;return(0,r.jsx)("div",{className:"".concat(O().labelText," ").concat(t||""),children:a})};var Z=t(49005);class M{async getUserProfile(){let e=await fetch(this.baseUrl,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch profile: ".concat(e.statusText));return e.json()}async updateUserProfile(e){let a=await fetch(this.baseUrl,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).error||"Failed to update profile: ".concat(a.statusText));return a.json()}async updateUserMetadata(e){let a=await fetch("/api/auth/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_metadata:e})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).error||"Failed to update user metadata: ".concat(a.statusText))}constructor(){this.baseUrl="/api/profile"}}let L=new M;var G=t(96196);let W=()=>{let{user:e}=(0,G.A)(),{profile:a,stats:t,achievements:i,error:l}=function(){let{data:e,error:a,mutate:t,isLoading:r}=(0,Z.Ay)("/api/profile",()=>L.getUserProfile(),{revalidateOnFocus:!1,revalidateOnReconnect:!0,errorRetryCount:3});return{profile:null==e?void 0:e.profile,stats:null==e?void 0:e.stats,achievements:null==e?void 0:e.achievements,isLoading:r,error:a,mutate:t}}(),{updateUserMetadata:o,isUpdating:d,error:c}=function(){let[e,a]=(0,s.useState)(!1),[t,r]=(0,s.useState)(null);return{updateProfile:async e=>{a(!0),r(null);try{return await L.updateUserProfile(e)}catch(e){return r(e instanceof Error?e.message:"Failed to update profile"),null}finally{a(!1)}},updateUserMetadata:async e=>{a(!0),r(null);try{return await L.updateUserMetadata(e),!0}catch(e){return r(e instanceof Error?e.message:"Failed to update user metadata"),!1}finally{a(!1)}},isUpdating:e,error:t,clearError:()=>r(null)}}();if(l)return(0,r.jsxs)("div",{className:n().container,children:[(0,r.jsx)("div",{className:n().header,children:(0,r.jsx)("h1",{className:n().title,children:"Profile"})}),(0,r.jsx)("div",{className:n().errorState,children:(0,r.jsxs)("p",{children:["Error loading profile: ",l.message]})})]});if(!e)return null;let u={user_id:e.id,total_workouts:0,days_active:0,hours_trained:0,achievements_count:0,last_updated:new Date};return(0,r.jsxs)("div",{className:n().container,children:[(0,r.jsxs)("div",{className:n().header,children:[(0,r.jsx)("h1",{className:n().title,children:"Profile"}),c&&(0,r.jsxs)("div",{className:n().errorMessage,children:["Error: ",c]})]}),(0,r.jsxs)("div",{className:n().content,children:[(0,r.jsxs)("div",{className:n().mainContent,children:[(0,r.jsx)(j,{user:e,onUpdateMetadata:o,isUpdating:d}),a&&(0,r.jsx)(z,{profile:a})]}),(0,r.jsxs)("div",{className:n().sidebar,children:[(0,r.jsx)(P,{stats:t||u}),(0,r.jsx)(S,{achievements:i||[]})]})]})]})},H=()=>(0,r.jsx)(W,{})},86067:(e,a,t)=>{"use strict";t.d(a,{J:()=>n});var r=t(20906),s=t(13496);t(33826);var i=t(66208);let n=e=>{let{className:a,...t}=e;return(0,r.jsx)(s.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}},92661:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var r=t(20906);t(33826);var s=t(66208);let i=e=>{let{className:a,type:t,...i}=e;return(0,r.jsx)("input",{type:t,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}},92848:(e,a,t)=>{"use strict";t.d(a,{w:()=>n});var r=t(20906),s=t(32026);t(33826);var i=t(66208);let n=e=>{let{className:a,orientation:t="horizontal",decorative:n=!0,...l}=e;return(0,r.jsx)(s.b,{"data-slot":"separator-root",decorative:n,orientation:t,className:(0,i.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...l})}},96196:(e,a,t)=>{"use strict";t.d(a,{AuthProvider:()=>c,A:()=>u});var r=t(20906),s=t(12488),i=t(33826),n=t(49005),l=t(91670);let o=(0,i.createContext)(void 0),d=async e=>{let a=await fetch(e);if(!a.ok){if(401===a.status)return null;let e=Error("An error occurred while fetching the user.");throw e.info=await a.json(),e.status=a.status,e}return(await a.json()).user||null},c=e=>{let{children:a}=e,t=(0,l.createBrowserClient)("http://127.0.0.1:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"),c=(0,s.useRouter)(),[u,h]=(0,i.useState)(!1),{data:m,mutate:v}=(0,n.Ay)("/api/auth/user",d,{revalidateOnFocus:!0,shouldRetryOnError:!1,suspense:!0,fallbackData:null}),_=(0,i.useCallback)(async(e,a)=>{"SIGNED_IN"===e||"USER_UPDATED"===e?await v():"SIGNED_OUT"===e&&await v(null,!1)},[v]);(0,i.useEffect)(()=>{let{data:{subscription:e}}=t.auth.onAuthStateChange((e,a)=>{_(e,a)});return()=>{e.unsubscribe()}},[t,_]);let x=async(e,a)=>{if(e&&a){h(!0);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}),r=await t.json();if(!t.ok)throw Error(r.error||"Login failed");await v(r.user,!1),c.push("/dashboard")}finally{h(!1)}}},p=async(e,a,t)=>{if(e&&a&&t){h(!0);try{let r=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a,name:t})}),s=await r.json();if(!r.ok)throw Error(s.error||"Sign up failed");await v(s.user,!1),c.push("/dashboard")}finally{h(!1)}}},b=async()=>{h(!0);try{let e=await fetch("/api/auth/logout",{method:"POST"});if(!e.ok){let a=await e.json();throw Error(a.error||"Logout failed")}await v(null,!1),c.push("/")}finally{h(!1)}};return(0,r.jsx)(o.Provider,{value:{isAuthenticated:!!m,isAuthOperationLoading:u,login:x,logout:b,signUp:p,user:m||null,userId:(null==m?void 0:m.id)||null,userRoles:(null==m?void 0:m.userRoles)||[],userGroups:(null==m?void 0:m.userGroups)||[],hasRole:e=>{var a;return(null==m||null==(a=m.userRoles)?void 0:a.includes(e))||!1},hasGroup:e=>{var a;return(null==m||null==(a=m.userGroups)?void 0:a.includes(e))||!1},hasAnyRole:e=>(null==e?void 0:e.some(e=>{var a;return null==m||null==(a=m.userRoles)?void 0:a.includes(e)}))||!1,hasAnyGroup:e=>(null==e?void 0:e.some(e=>{var a;return null==m||null==(a=m.userGroups)?void 0:a.includes(e)}))||!1},children:a})},u=()=>{let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},96673:e=>{e.exports={content:"ActivityStatsCard_content__LHPML",statItem:"ActivityStatsCard_statItem__gHPSI",statInfo:"ActivityStatsCard_statInfo__a3sa_",statIcon:"ActivityStatsCard_statIcon__3HL4B",icon:"ActivityStatsCard_icon__2iMNY",statLabel:"ActivityStatsCard_statLabel__s027F",statValue:"ActivityStatsCard_statValue__cI_6q"}}},e=>{e.O(0,[2639,4301,9005,1670,3950,7524,8202,7358],()=>e(e.s=46543)),_N_E=e.O()}]);