(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4905],{3418:(e,s,t)=>{"use strict";t.d(s,{B7:()=>r,J8:()=>a,ep:()=>i,g:()=>l});let a=e=>{let s={Beginner:"bg-green-100 text-green-700",Intermediate:"bg-yellow-100 text-yellow-700",Advanced:"bg-red-100 text-red-700",Unknown:"bg-gray-100 text-gray-700"};return s[e]||s.Unknown},r=e=>{switch(e){case"Beginner":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"Intermediate":return"bg-amber-100 text-amber-700 border-amber-200";case"Advanced":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},i=e=>{let s={Strength:"bg-indigo-100 text-indigo-700",Cardio:"bg-green-100 text-green-700",Flexibility:"bg-purple-100 text-purple-700",Balance:"bg-yellow-100 text-yellow-700"};return s[e]||s.Strength},l=(e,s)=>{if(!s){let s=e.variants.find(s=>s.id===e.mainVariantId);if(!s)throw Error("No main variant found for exercise ".concat(e.id));return s}return s}},4211:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>d});var a=t(20906),r=t(90882),i=t(57742),l=t(33826),n=t(66208);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,s)=>{let{className:t,variant:i,size:l,asChild:c=!1,...o}=e,x=c?r.DX:"button";return(0,a.jsx)(x,{"data-slot":"button",className:(0,n.cn)(d({variant:i,size:l,className:t})),ref:s,...o})});c.displayName="Button"},37634:(e,s,t)=>{"use strict";t.d(s,{A:()=>l,Fb:()=>i,IS:()=>n,zy:()=>d});var a=t(49005);let r=async e=>{let s=await fetch(e);if(!s.ok)throw Error("Failed to fetch data");return s.json()};function i(){let{data:e,error:s,isLoading:t,mutate:i}=(0,a.Ay)("/api/exercises",r);return{exercises:(null==e?void 0:e.exercises)||[],isLoading:t,error:s,mutate:i}}function l(e){let{data:s,error:t,isLoading:i,mutate:l}=(0,a.Ay)(e?"/api/exercises/".concat(e):null,r);return{exercise:null==s?void 0:s.exercise,isLoading:i,error:t,mutate:l}}function n(e){let s=new URLSearchParams;e.searchTerm&&s.append("searchTerm",e.searchTerm),e.category&&s.append("category",e.category),e.difficulties&&e.difficulties.forEach(e=>{s.append("difficulty",e)}),e.equipment&&e.equipment.forEach(e=>{s.append("equipment",e)}),e.muscleGroups&&e.muscleGroups.forEach(e=>{s.append("muscleGroup",e)});let{data:t,error:i,isLoading:l,mutate:n}=(0,a.Ay)(s.toString()?"/api/exercises/search?".concat(s.toString()):null,r);return{exercises:(null==t?void 0:t.exercises)||[],isLoading:l,error:i,mutate:n}}function d(){return{addToFavorites:async(e,s)=>{let t=await fetch("/api/exercises/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,exerciseId:s})});if(!t.ok)throw Error("Failed to add to favorites");return t.json()},removeFromFavorites:async(e,s)=>{let t=await fetch("/api/exercises/favorites?userId=".concat(e,"&exerciseId=").concat(s),{method:"DELETE"});if(!t.ok)throw Error("Failed to remove from favorites");return t.json()}}}},47379:(e,s,t)=>{Promise.resolve().then(t.bind(t,65394))},65394:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var a=t(20906),r=t(12488),i=t(12120),l=t(20616),n=t(55324),d=t(66356),c=t(33826),o=t(37634),x=t(4211),m=t(96196);let u=e=>{let{exercise:s,variant:t}=e,[r,i]=(0,c.useState)(s.isFavorite),[u,h]=(0,c.useState)(!1),{addToFavorites:g,removeFromFavorites:p}=(0,o.zy)(),{userId:v}=(0,m.A)(),f=async()=>{if(v&&!u){h(!0);try{r?(await p(v,s.id),i(!1)):(await g(v,s.id),i(!0))}catch(e){i(s.isFavorite)}finally{h(!1)}}};return(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-indigo-600 rounded-md flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xl",children:s.icon})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:t.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[s.isPopular&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsx)("span",{children:"Popular"})]}),s.rating&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,a.jsx)("span",{children:s.rating})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[v&&(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:f,disabled:u,"data-testid":"favorite-button",children:(0,a.jsx)(n.A,{className:"w-4 h-4 ".concat(r?"text-red-500 fill-red-500":"text-gray-400"," ").concat(u?"animate-pulse":"")})}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm","data-testid":"printer-button",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})})]})]})};var h=t(3418);let g=e=>{var s;let{exercise:t,variant:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Category"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:t.category})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Equipment"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:(null==(s=r.equipment)?void 0:s.join(", "))||"None"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Difficulty"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat((0,h.J8)(r.difficulty)),children:r.difficulty})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Focus"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:r.focus})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:r.description})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Primary Muscles"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.muscleGroups.map(e=>(0,a.jsx)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm",children:e},e))})]})]})};var p=t(70097);let v=e=>{let{exercise:s,variant:t}=e;return(0,a.jsxs)(p.Zp,{className:"p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Step-by-Step Instructions"}),(0,a.jsx)("div",{className:"space-y-6",children:t.steps.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:s+1}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-gray-700",children:e.description})]})]},s))})]})};var f=t(90562),j=t(32721);let b=e=>{let{exercise:s,variant:t}=e;return t.tips?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)(p.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 text-green-600 rounded-md flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"w-5 h-5"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Pro Tips"})]}),(0,a.jsx)("ul",{className:"space-y-3",children:t.tips.proTips.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},s))})]}),(0,a.jsxs)(p.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 text-red-600 rounded-md flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"w-5 h-5"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Common Mistakes"})]}),(0,a.jsx)("ul",{className:"space-y-3",children:t.tips.commonMistakes.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},s))})]})]}):null};var y=t(73331);let N=e=>{let{exercise:s,currentVariantId:t}=e,i=(0,r.useRouter)(),[l,d]=(0,c.useState)(s.isFavorite),[u,h]=(0,c.useState)(!1),{addToFavorites:g,removeFromFavorites:v}=(0,o.zy)(),{userId:f}=(0,m.A)();(0,c.useEffect)(()=>{d(s.isFavorite)},[s.isFavorite]);let j=s.variants.filter(e=>!t||e.id!==t);if(!j||0===j.length)return null;let b=async e=>{if((e.stopPropagation(),f)&&!u){h(!0);try{l?(await v(f,s.id),d(!1)):(await g(f,s.id),d(!0))}catch(e){d(s.isFavorite)}finally{h(!1)}}};return(0,a.jsxs)(p.Zp,{className:"p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Variants"}),(0,a.jsx)(x.$,{variant:"ghost",className:"text-indigo-600",children:"View All"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:j.map(e=>{var t;return(0,a.jsxs)(p.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{var t;return t=e.id,void i.push("/exercises/".concat(s.id,"/variants/").concat(t))},children:[(0,a.jsx)("div",{className:"bg-gray-100 h-40 relative",children:(null==(t=e.media)?void 0:t.featuredImage)?(0,a.jsx)(y.default,{src:e.media.featuredImage,alt:e.name,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-500",children:"No Image"})})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-xs",children:e.focus}),f&&(0,a.jsx)(x.$,{variant:"ghost",size:"sm",onClick:b,disabled:u,children:(0,a.jsx)(n.A,{className:"w-4 h-4 ".concat(l?"text-red-500 fill-red-500":"text-gray-400"," ").concat(u?"animate-pulse":"")})})]})]})]},e.id)})})]})};var w=t(60398);let k=e=>{var s,t,r;let{exercise:i,variant:l}=e;return(null==(s=l.media)?void 0:s.featuredVideo)||(null==(r=l.media)||null==(t=r.videos)?void 0:t[0])?(0,a.jsxs)(p.Zp,{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-100 h-64 relative",children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(x.$,{className:"h-16 w-16 rounded-full bg-white/80 hover:bg-white/90",children:(0,a.jsx)(w.A,{className:"w-6 h-6 text-indigo-600"})})})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Demonstration Video"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Watch this demonstration to ensure proper form and technique."}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Video available"}),(0,a.jsx)(x.$,{variant:"ghost",size:"sm",className:"text-indigo-600",children:"Full Screen"})]})]})]}):(0,a.jsxs)(p.Zp,{className:"overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-100 h-64 relative",children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-gray-500 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCF9"}),(0,a.jsx)("p",{className:"text-sm",children:"No video available"})]})})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Demonstration Video"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Video demonstration not available for this exercise variant."})]})]})},A=e=>{let{exerciseId:s,variantId:t}=e,l=(0,r.useRouter)(),{exercise:n,isLoading:d,error:c}=(0,o.A)(s);if(d)return(0,a.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-6"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})})]})]})});if(c||!n)return(0,a.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Exercise Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"The exercise you're looking for doesn't exist or has been removed."}),(0,a.jsx)("button",{onClick:()=>l.push("/exercises"),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Back to Exercises"})]})});let x=n.variants.find(e=>e.id===t);return x?(0,a.jsxs)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-6",children:[(0,a.jsx)("button",{onClick:()=>l.push("/exercises"),className:"hover:text-gray-700",children:"Exercises"}),(0,a.jsx)(i.A,{className:"w-4 h-4 mx-2"}),(0,a.jsx)("span",{className:"text-indigo-600 flex items-center",children:n.name===x.name?n.name:(0,a.jsxs)(a.Fragment,{children:[n.name,(0,a.jsx)(i.A,{className:"w-4 h-4 mx-2"}),x.name]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(p.Zp,{className:"p-6",children:[(0,a.jsx)(u,{exercise:n,variant:x}),(0,a.jsx)(g,{exercise:n,variant:x})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(k,{exercise:n,variant:x})})]}),(0,a.jsx)(v,{exercise:n,variant:x}),(0,a.jsx)(N,{exercise:n,currentVariantId:t}),(0,a.jsx)(b,{exercise:n,variant:x})]}):(0,a.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Exercise Variant Not Found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:['The variant "',t,'" for this exercise is not available.']}),(0,a.jsx)("button",{onClick:()=>l.push("/exercises"),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Back to Exercises"})]})})},E=()=>{let{exerciseId:e,variantId:s}=(0,r.useParams)();return(0,a.jsx)(A,{exerciseId:e,variantId:s})}},66208:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(63756),r=t(77564);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},70097:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>i,aR:()=>l});var a=t(20906);t(33826);var r=t(66208);let i=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",s),...t})},l=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})},n=e=>{let{className:s,...t}=e;return(0,a.jsx)("h4",{"data-slot":"card-title",className:(0,r.cn)("leading-none",s),...t})},d=e=>{let{className:s,...t}=e;return(0,a.jsx)("p",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground",s),...t})},c=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6 [&:last-child]:pb-6",s),...t})}},96196:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>o,A:()=>x});var a=t(20906),r=t(12488),i=t(33826),l=t(49005),n=t(91670);let d=(0,i.createContext)(void 0),c=async e=>{let s=await fetch(e);if(!s.ok){if(401===s.status)return null;let e=Error("An error occurred while fetching the user.");throw e.info=await s.json(),e.status=s.status,e}return(await s.json()).user||null},o=e=>{let{children:s}=e,t=(0,n.createBrowserClient)("http://127.0.0.1:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"),o=(0,r.useRouter)(),[x,m]=(0,i.useState)(!1),{data:u,mutate:h}=(0,l.Ay)("/api/auth/user",c,{revalidateOnFocus:!0,shouldRetryOnError:!1,suspense:!0,fallbackData:null}),g=(0,i.useCallback)(async(e,s)=>{"SIGNED_IN"===e||"USER_UPDATED"===e?await h():"SIGNED_OUT"===e&&await h(null,!1)},[h]);(0,i.useEffect)(()=>{let{data:{subscription:e}}=t.auth.onAuthStateChange((e,s)=>{g(e,s)});return()=>{e.unsubscribe()}},[t,g]);let p=async(e,s)=>{if(e&&s){m(!0);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})}),a=await t.json();if(!t.ok)throw Error(a.error||"Login failed");await h(a.user,!1),o.push("/dashboard")}finally{m(!1)}}},v=async(e,s,t)=>{if(e&&s&&t){m(!0);try{let a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s,name:t})}),r=await a.json();if(!a.ok)throw Error(r.error||"Sign up failed");await h(r.user,!1),o.push("/dashboard")}finally{m(!1)}}},f=async()=>{m(!0);try{let e=await fetch("/api/auth/logout",{method:"POST"});if(!e.ok){let s=await e.json();throw Error(s.error||"Logout failed")}await h(null,!1),o.push("/")}finally{m(!1)}};return(0,a.jsx)(d.Provider,{value:{isAuthenticated:!!u,isAuthOperationLoading:x,login:p,logout:f,signUp:v,user:u||null,userId:(null==u?void 0:u.id)||null,userRoles:(null==u?void 0:u.userRoles)||[],userGroups:(null==u?void 0:u.userGroups)||[],hasRole:e=>{var s;return(null==u||null==(s=u.userRoles)?void 0:s.includes(e))||!1},hasGroup:e=>{var s;return(null==u||null==(s=u.userGroups)?void 0:s.includes(e))||!1},hasAnyRole:e=>(null==e?void 0:e.some(e=>{var s;return null==u||null==(s=u.userRoles)?void 0:s.includes(e)}))||!1,hasAnyGroup:e=>(null==e?void 0:e.some(e=>{var s;return null==u||null==(s=u.userGroups)?void 0:s.includes(e)}))||!1},children:s})},x=()=>{let e=(0,i.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[4301,9005,1670,8625,7524,8202,7358],()=>e(e.s=47379)),_N_E=e.O()}]);