exports.id=3559,exports.ids=[3559],exports.modules={10158:()=>{},45590:()=>{},52367:()=>{},73206:()=>{},93974:(a,b,c)=>{"use strict";function d(a){switch(a){case"Barbell":return"Barbell";case"Dumbbell":return"Dumbbell";case"Bodyweight":default:return"Bodyweight";case"Machine":return"Machine";case"Resistance Band":return"Resistance Band";case"Kettlebell":return"Kettlebell";case"Cable":return"Cable";case"Bench":return"Bench";case"Incline Bench":return"Incline Bench";case"Decline Bench":return"Decline Bench";case"Pull-up Bar":return"Pull-up Bar";case"Squat Rack":return"Squat Rack";case"Step":return"Step"}}function e(a){switch(a){case"Chest":return"Chest";case"Back":return"Back";case"Legs":return"Legs";case"Arms":return"Arms";case"Shoulders":return"Shoulders";case"Core":default:return"Core";case"Glutes":return"Glutes";case"Biceps":return"Biceps";case"Triceps":return"Triceps";case"Cardio":return"Cardio";case"Full Body":return"Full Body";case"Upper Chest":return"Upper Chest";case"Lower Chest":return"Lower Chest";case"Front Delts":return"Front Delts";case"Obliques":return"Obliques";case"Quadriceps":return"Quadriceps";case"Hamstrings":return"Hamstrings"}}function f(a,b,c,f){return{id:a.id,name:a.name,alternativeNames:a.alternative_names,description:a.description,focus:a.focus,difficulty:function(a){switch(a){case"Beginner":default:return"Beginner";case"Intermediate":return"Intermediate";case"Advanced":return"Advanced";case"Unknown":return"Unknown"}}(a.difficulty),equipment:a.equipment.map(d),muscleGroups:a.muscle_groups.map(e),secondaryMuscles:a.secondary_muscles?.map(e),isUnilateral:a.is_unilateral,instructions:a.instructions,steps:b.sort((a,b)=>a.step_order-b.step_order).map(a=>({title:a.title,description:a.description})),tips:c?{proTips:c.pro_tips,commonMistakes:c.common_mistakes,safetyNotes:c.safety_notes}:void 0,media:f?{images:f.images,videos:f.videos,featuredImage:f.featured_image,featuredVideo:f.featured_video}:void 0,prerequisites:void 0,created_at:new Date(a.created_at),updated_at:new Date(a.updated_at)}}function g(a,b){let c=b.map(a=>a.difficulty),d=new Set,e=new Set;return b.forEach(a=>{a.equipment.forEach(a=>d.add(a)),a.muscleGroups.forEach(a=>e.add(a))}),{id:a.id,name:a.name,alternativeNames:a.alternative_names,category:function(a){switch(a){case"Strength":default:return"Strength";case"Cardio":return"Cardio";case"Flexibility":return"Flexibility";case"Balance":return"Balance"}}(a.category),description:a.description,variants:b,mainVariantId:b[0]?.id,icon:a.icon,iconColor:a.icon_color,isFavorite:!1,isPopular:a.is_popular,isNew:a.is_new,rating:a.rating||void 0,summary:{difficultyRange:{min:c.length>0?({0:"Unknown",1:"Beginner",2:"Intermediate",3:"Advanced"})[Math.min(...c.map(a=>({Beginner:1,Intermediate:2,Advanced:3,Unknown:0})[a]||0))]||"Unknown":"Beginner",max:c.length>0?({0:"Unknown",1:"Beginner",2:"Intermediate",3:"Advanced"})[Math.max(...c.map(a=>({Beginner:1,Intermediate:2,Advanced:3,Unknown:0})[a]||0))]||"Unknown":"Beginner"},equipmentOptions:Array.from(d),primaryMuscleGroups:Array.from(e)},tags:a.tags,relatedExercises:a.related_exercise_ids,created_at:new Date(a.created_at),updated_at:new Date(a.updated_at)}}c.d(b,{Q:()=>r});class h{aggregateExerciseData(a,b,c,d,e){let h=[];for(let i of a){let a=b.filter(a=>a.exercise_id===i.id),j=[];for(let b of a){let a=c.filter(a=>a.exercise_variant_id===b.id),g=d.find(a=>a.exercise_variant_id===b.id),h=e.find(a=>a.exercise_variant_id===b.id);j.push(f(b,a,g,h))}h.push(g(i,j))}return h}filterVariantsByCriteria(a,b){return a.filter(a=>(!b.difficulties||!(b.difficulties.length>0)||!!b.difficulties.includes(a.difficulty))&&(!b.equipment||!(b.equipment.length>0)||!!b.equipment.some(b=>a.equipment?.includes(b)))&&(!b.muscleGroups||!(b.muscleGroups.length>0)||!!b.muscleGroups.some(b=>a.muscle_groups?.includes(b))))}transformJoinedExerciseData(a,b){let c=[];for(let d of a){let a=d.exercise_variants||[],e=b?this.filterVariantsByCriteria(a,b):a;if(e.length>0){let a=e.map(a=>{let b=a.exercise_instruction_steps||[],c=a.exercise_tips?.[0],d=a.exercise_media?.[0];return f(a,b,c,d)});c.push(g(d,a))}}return c}transformUserFavoritesData(a){let b=[];for(let c of a){let a=c.exercises;if(a&&"object"==typeof a&&!Array.isArray(a)){let c=(a.exercise_variants||[]).map(a=>{let b=a.exercise_instruction_steps||[],c=a.exercise_tips?.[0],d=a.exercise_media?.[0];return f(a,b,c,d)}),d=g(a,c);d.isFavorite=!0,b.push(d)}}return b}}let i=new h;var j=c(97645);class k{async fetchExercisesWithRelatedData(){let a=await (0,j.U)(),{data:b,error:c}=await a.from("exercises").select("*").order("name");if(c)throw c;if(!b)return{exercises:[],variants:[],steps:[],tips:[],media:[]};let d=b.map(a=>a.id),{data:e,error:f}=await a.from("exercise_variants").select("*").in("exercise_id",d).order("name");if(f)throw f;let g=e?.map(a=>a.id)||[],{data:h,error:i}=await a.from("exercise_instruction_steps").select("*").in("exercise_variant_id",g).order("step_order");if(i)throw i;let{data:k,error:l}=await a.from("exercise_tips").select("*").in("exercise_variant_id",g);if(l)throw l;let{data:m,error:n}=await a.from("exercise_media").select("*").in("exercise_variant_id",g);if(n)throw n;return{exercises:b||[],variants:e||[],steps:h||[],tips:k||[],media:m||[]}}async fetchExerciseWithRelatedData(a){let b=await (0,j.U)(),{data:c,error:d}=await b.from("exercises").select("*").eq("id",a).single();if(d)throw d;if(!c)return{exercise:null,variants:[],steps:[],tips:[],media:[]};let{data:e,error:f}=await b.from("exercise_variants").select("*").eq("exercise_id",a).order("name");if(f)throw f;let g=e?.map(a=>a.id)||[],{data:h,error:i}=await b.from("exercise_instruction_steps").select("*").in("exercise_variant_id",g).order("step_order");if(i)throw i;let{data:k,error:l}=await b.from("exercise_tips").select("*").in("exercise_variant_id",g);if(l)throw l;let{data:m,error:n}=await b.from("exercise_media").select("*").in("exercise_variant_id",g);if(n)throw n;return{exercise:c,variants:e||[],steps:h||[],tips:k||[],media:m||[]}}async searchExercisesWithJoins(a,b){let c=(await (0,j.U)()).from("exercises").select(`
        *,
        exercise_variants (
          *,
          exercise_instruction_steps (*),
          exercise_tips (*),
          exercise_media (*)
        )
      `);a&&(c=c.or(`name.ilike.%${a}%,description.ilike.%${a}%`)),b&&(c=c.eq("category",b));let{data:d,error:e}=await c;if(e)throw e;return d||[]}async fetchUserFavorites(a){let b=await (0,j.U)(),{data:c,error:d}=await b.from("user_exercise_favorites").select(`
        exercise_id,
        exercises (
          *,
          exercise_variants (
            *,
            exercise_instruction_steps (*),
            exercise_tips (*),
            exercise_media (*)
          )
        )
      `).eq("user_id",a).order("created_at",{ascending:!1});if(d)throw d;return c||[]}async addToFavorites(a,b){let c=await (0,j.U)(),{error:d}=await c.from("user_exercise_favorites").insert({user_id:a,exercise_id:b});if(d)throw d}async removeFromFavorites(a,b){let c=await (0,j.U)(),{error:d}=await c.from("user_exercise_favorites").delete().eq("user_id",a).eq("exercise_id",b);if(d)throw d}}let l=new k;class m{handleDatabaseError(a,b){throw console.error(`Database error during ${b}:`,a),Error(`Failed to ${b}`)}handleValidationError(a){throw console.error("Validation error:",a),Error(`Validation failed: ${a}`)}handleNotFoundError(a,b){throw Error(b?`${a} with ID ${b} not found`:`${a} not found`)}handlePermissionError(a){throw console.error(`Permission denied for operation: ${a}`),Error(`You don't have permission to ${a}`)}}let n=new m;class o{validateExerciseData(a){return!!a&&"object"==typeof a&&"string"==typeof a.id&&"string"==typeof a.name&&"string"==typeof a.category&&"string"==typeof a.description}validateExerciseArray(a){return!!Array.isArray(a)&&a.every(a=>this.validateExerciseData(a))}validateFavoriteData(a){return!!a&&"object"==typeof a&&!!("string"==typeof a.exercise_id&&a.exercises&&"object"==typeof a.exercises&&!Array.isArray(a.exercises))}validateSearchParams(a){return!0}validateUserId(a){return"string"==typeof a&&a.length>0}validateExerciseId(a){return"string"==typeof a&&a.length>0}}let p=new o;class q{async getAllExercises(){try{let{exercises:a,variants:b,steps:c,tips:d,media:e}=await l.fetchExercisesWithRelatedData();return i.aggregateExerciseData(a,b,c,d,e)}catch(a){return n.handleDatabaseError(a,"fetch exercises")}}async getExerciseById(a){if(!p.validateExerciseId(a))return n.handleValidationError("Invalid exercise ID"),null;try{let{exercise:b,variants:c,steps:d,tips:e,media:f}=await l.fetchExerciseWithRelatedData(a);if(!b)return n.handleNotFoundError("Exercise",a),null;return i.aggregateExerciseData([b],c,d,e,f)[0]||null}catch(a){return n.handleDatabaseError(a,"fetch exercise"),null}}async searchExercises(a){if(!p.validateSearchParams(a))return n.handleValidationError("Invalid search parameters"),[];try{let b=await l.searchExercisesWithJoins(a.searchTerm,a.category),c={difficulties:a.difficulties,equipment:a.equipment,muscleGroups:a.muscleGroups};return i.transformJoinedExerciseData(b,c)}catch(a){return n.handleDatabaseError(a,"search exercises"),[]}}async getUserFavoriteExercises(a){if(!p.validateUserId(a))return n.handleValidationError("Invalid user ID"),[];try{let b=await l.fetchUserFavorites(a);return i.transformUserFavoritesData(b)}catch(a){return n.handleDatabaseError(a,"fetch user favorites"),[]}}async addToFavorites(a,b){if(!p.validateUserId(a))return void n.handleValidationError("Invalid user ID");if(!p.validateExerciseId(b))return void n.handleValidationError("Invalid exercise ID");try{await l.addToFavorites(a,b)}catch(a){n.handleDatabaseError(a,"add to favorites")}}async removeFromFavorites(a,b){if(!p.validateUserId(a))return void n.handleValidationError("Invalid user ID");if(!p.validateExerciseId(b))return void n.handleValidationError("Invalid exercise ID");try{await l.removeFromFavorites(a,b)}catch(a){n.handleDatabaseError(a,"remove from favorites")}}}let r=new q},97645:(a,b,c)=>{"use strict";c.d(b,{U:()=>f});var d=c(77606),e=c(14858);async function f(){let a=await (0,e.UL)();return(0,d.createServerClient)("http://127.0.0.1:54321","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0",{cookies:{getAll:()=>a.getAll(),setAll(b){try{b.forEach(({name:b,value:c,options:d})=>a.set(b,c,d))}catch{}}}})}}};