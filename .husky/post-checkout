#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîÑ Post-checkout hook: Pulling latest changes and installing dependencies..."

# Get the previous and current branch
PREVIOUS_BRANCH=$1
NEW_HEAD=$2
CHECKOUT_TYPE=$3

# Get the current branch name
CURRENT_BRANCH=$(git branch --show-current)

echo "Switched from $PREVIOUS_BRANCH to $CURRENT_BRANCH"

# Only run for branch checkouts (not file checkouts)
if [ "$CHECKOUT_TYPE" = "1" ]; then
    echo "üì• Pulling latest changes..."
    git pull origin $CURRENT_BRANCH

    echo "üì¶ Installing dependencies..."
    pnpm install

    echo "‚úÖ Post-checkout hook completed successfully!"
else
    echo "‚è≠Ô∏è  Skipping post-checkout hook (file checkout detected)"
fi
